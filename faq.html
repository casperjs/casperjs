<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="http://casperjs.org/">
    <title>F.A.Q | CasperJS 1.0.0-RC6</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="keywords" content="phantomjs, phantom, casperjs, casper, browser, javascript, navigation, scripting, test, testing, scrape, scraping">
    <meta name="description" content="CasperJS is a browser navigation scripting &amp; testing utility written in Javascript on top of PhantomJS.">
    <meta name="google-site-verification" content="SEcGmVv4IsGYP6-xMJquQcrUrYjIZNXyX0VGfly2m1o">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic&amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="prettify/prettify.css?1355807353322">
    <link rel="stylesheet" href="css/casper.css?1355807353322">
    <link rel="shortcut icon" href="favicon.ico">
</head>
<body>
    <a href="http://github.com/n1k0/casperjs" class="contribute">
        <img src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
    </a>
    <div class="navbar navbar-fixed-top" id="topbar">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="./index.html">CasperJS</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="installation.html">Install</a></li>
                        <li><a href="quickstart.html">Quickstart</a></li>
                        <li class="dropdown" id="api-menu">
                            <a class="dropdown-toggle" data-toggle="dropdown" data-target="#api-menu" href="api.html">
                                <abbr title="Application Programming Interface">API</abbr>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="api.html#intro">Home</a></li>
                                <li class="divider"></li>
                                <li><a href="api.html#casper">Casper API</a></li>
                                <li><a href="api.html#client-utils">Client-side utils</a></li>
                                <li><a href="api.html#colorizer">Colorizer API</a></li>
                                <li><a href="api.html#tester">Tester API</a></li>
                                <li><a href="api.html#utils">Utils API</a></li>
                            </ul>
                        </li>
                        <li><a href="cli.html"><abbr title="Command Line Interface">CLI</abbr></a></li>
                        <li><a href="selectors.html">Selectors</a></li>
                        <li><a href="events-filters.html">Events</a></li>
                        <li><a href="logging.html">Logging</a></li>
                        <li><a href="extending.html">Extending</a></li>
                        <li><a href="testing.html">Testing</a></li>
                        <li><a href="debugging.html">Debugging</a></li>
                        <li class="active"><a href="faq.html"><abbr title="Frequently Asked Questions">FAQ</abbr></a></li>
                        <li><a href="https://groups.google.com/forum/#!forum/casperjs">Support</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="container" id="overview">
        <div class="content"><section>
    <div class="page-header">
        <h1>
            <span class="section-title">Frequently Asked Questions</span>
            <small class="section-subtitle">in random order</small>
        </h1>
    </div>
    <div class="row">
        <div class="span8 section-content"><p>Here's a selection of the most frequently asked questions by casperjs
newcomers.

</p>
<h2 id="faq-nodejs">Is CasperJS a nodejs library?</h2>

<div style="font-size:120%;font-weight:bold">
    <p>
        <big>No.</big> CasperJS is written on top of
        <a href="http://www.phantomjs.org/">PhantomJS</a>, which is a
        node-independent Qt/Webkit based library. <ins>If you try to run your
        CasperJS script with <code>node</code> or <code>coffee</code>, it just
        won't work</ins>
    </p>
    <p>
        <span class="label label-info">Hint</span>
        If you want to use CasperJS with node, try
        <a href="https://github.com/WaterfallEngineering/SpookyJS">SpookyJS</a>.
    </p>
</div>

<hr>
<h2 id="faq-help">I'm stuck! I think there's a bug! What can I do?</h2>

<p>Before rage-tweeting:

</p>
<ol>
<li>Read the <a href="http://casperjs.org/">docs</a></li>
<li>Check if an <a href="https://github.com/n1k0/casperjs/issues">issue</a> has been open about your problem already</li>
<li>Check you're running the <a href="https://github.com/n1k0/casperjs/tags">latest stable tag</a></li>
<li>Check you're running the <a href="http://code.google.com/p/phantomjs/downloads/list">latest version</a> of PhantomJS</li>
<li>Ask on the <a href="https://groups.google.com/forum/#!forum/casperjs">project mailing list</a>:<ul>
<li>try to post a reproducible, minimal test case</li>
<li>compare casperjs results with native phantomjs ones</li>
<li>if the problem also occurs with native phantomjs, ask on <a href="https://groups.google.com/forum/#!forum/phantomjs">phantomjs mailing list</a></li>
</ul>
</li>
<li>Eventually, <a href="https://github.com/n1k0/casperjs/issues/new">file an issue</a>.</li>
</ol>
<hr>
<h2 id="faq-modularization">I keep copy and pasting stuff in my test scripts, that's boring</h2>

<p>Have a look at <a href="https://gist.github.com/3813361">this gist</a>, it might help.

</p>
<p>Also, don't forget that CasperJS supports a <a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS-compliant module pattern</a>
implementation. Note that CasperJS' implementation differs a bit from the one provided by PhantomJS, but
I personnaly never really encountered any functional difference.

</p>
<hr>
<h2 id="faq-versioning">What is the versioning policy of CasperJS?</h2>

<p>Releases will follow the <a href="http://semver.org/">SemVer standard</a>; they
will be numbered with the follow format:

</p>
<pre><code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;[-&lt;identifier&gt;]</code></pre>
<p>And constructed with the following guidelines:

</p>
<ul>
<li>Breaking backwards compatibility bumps the major</li>
<li>New additions without breaking backwards compatibility bumps the minor</li>
<li>Bug fixes and misc changes bump the patch</li>
<li>Unstable, special and trunk versions will have a proper identifier</li>
</ul>
<hr>
<h2 id="faq-jquery">Can I use <a href="http://jquery.com/">jQuery</a> with CasperJS?</h2>

<p>Sure, as every single other javascript library on Earth.

</p>
<p>A first solution is to inject it into the remote DOM environment by
hand using the standard <code>WebPage.injectJs()</code> method:

</p>
<pre><code class="javascript">casper.page.injectJs('/path/to/jquery.js');</code></pre>
<p>If you need jQuery being available everytime, you can also make it being
injected in every received response by setting the <code>clientScripts</code>
option of CasperJS:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    clientScripts: ["includes/jquery.min.js"]
});</code></pre>
<p><span class="label label-info">Note</span>
You can't <em>inject</em> scripts using the HTTP protocol, you actually have to use
a relative/absolute filesystem path to the script resource.

</p>
<hr>
<h2 id="faq-executable">Can I use CasperJS without using the <code>casperjs</code> executable?</h2>

<p>Yes, you can call a CasperJS script directly with the <code>phantomjs</code>
executable, but if you do so, you must set the <code>phantom.casperPath</code>
property to the path where the library root is located on your system:

</p>
<pre><code class="javascript">// casperscript.js
phantom.casperPath = '/path/to/casperjs';
phantom.injectJs(phantom.casperPath + '/bin/bootstrap.js');

var casper = require('casper').create();
// ...</code></pre>
<p>You can run such a script like any other standard PhantomJS script:

</p>
<pre><code>$ phantomjs casperscript.js</code></pre>
<p><strong>If you're on Windows</strong>, this is the way you may manage to get casper working
the most easily:

</p>
<pre><code class="javascript">phantom.casperPath = 'C:\\path\\to\\your\\repo\\lib\\casperjs-0.6.X';
phantom.injectJs(phantom.casperPath + '\\bin\\bootstrap.js');

var casper = require('casper').create();

// do stuff</code></pre>
<hr>
<h2 id="faq-httpstatuses">How can I catch HTTP 404 and other status codes?</h2>

<p>You can define your own
<a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes">HTTP status code</a>
handlers by using the <code>httpStatusHandlers</code> option of the Casper object. You can
also catch other HTTP status codes as well, as demoed below:

</p>
<pre><code class="javascript">var casper = require('casper').create();

casper.on('http.status.404', function(resource) {
    this.echo('wait, this url is 404: ' + resource.url);
});

casper.on('http.status.500', function(resource) {
    this.echo('woops, 500 error: ' + resource.url);
});

casper.start('http://mywebsite/404', function() {
    this.echo('We suppose this url return an HTTP 404');
});

casper.thenOpen('http://mywebsite/500', function() {
    this.echo('We suppose this url return an HTTP 500');
});

casper.run(function() {
    this.echo('Done.').exit();
});</code></pre>
<p><span class="label label-info">Hint</span>
Check out all the other cool <a href="events-filters.html">events</a> you may use as well.

</p>
<hr>
<h2 id="faq-utils">What's this mysterious <code>__utils__</code> object?</h2>

<p>The <code>__utils__</code> object is actually an instance of the <a href="api.html#client-utils"><code>ClientUtils</code></a> class which
have been automatically injected into the page DOM and is therefore always available.

</p>
<p>So everytime to perform an <a href="api.html#casper.evaluate"><code>evaluate()</code></a> call, you have this instance available
to perform common operations like:

</p>
<ul>
<li>fetching nodes using CSS3 or XPath selectors,</li>
<li>retrieving information about element properties (attributes, size, bounds, etc.),</li>
<li>sending AJAX requests,</li>
<li>triggering DOM events</li>
</ul>
<p>Check out the <a href="api.html#client-utils">whole API</a>. You even have
<a href="api.html#bookmarklet">a bookmarklet</a> to play around with this <code>__utils__</code> instance
right within your browser console!

</p>
<p><span class="label label-info">Note</span> You're not obliged at all to use the <code>__utils__</code>
instance in your scripts. It's just there because it's used by CasperJS internals.

</p>
<hr>
<h2 id="faq-step-stack">How does <code>then()</code> and the step stack work?</h2>

<p><span class="label label-info">Disclaimer</span> This entry is based on an
<a href="http://stackoverflow.com/a/11957919/330911">answer I made on Stack Overflow</a>.

</p>
<p>The <code>then()</code> method basically adds a new navigation step in a stack. A step is a
javascript function which can do two different things:

</p>
<ol>
<li>waiting for the previous step - if any - being executed</li>
<li>waiting for a requested url and related page to load</li>
</ol>
<p>Let's take a simple navigation scenario:

</p>
<pre><code class="js">var casper = require('casper').create();

casper.start();

casper.then(function step1() {
    this.echo('this is step one');
});

casper.then(function step2() {
    this.echo('this is step two');
});

casper.thenOpen('http://google.com/', function step3() {
    this.echo('this is step 3 (google.com is loaded)');
});</code></pre>
<p>You can print out all the created steps within the stack like this:

</p>
<pre><code class="js">require('utils').dump(casper.steps.map(function(step) {
    return step.toString();
}));</code></pre>
<p>That gives:

</p>
<pre><code class="js">$ casperjs test-steps.js
[
    "function step1() { this.echo('this is step one'); }",
    "function step2() { this.echo('this is step two'); }",
    "function _step() { this.open(location, settings); }",
    "function step3() { this.echo('this is step 3 (google.com is loaded)'); }"
]</code></pre>
<p>Notice the <code>_step()</code> function which has been added automatically by CasperJS to
load the url for us; when the url is loaded, the next step available in the
stack — which is <code>step3()</code> — is <em>then</em> called.

</p>
<p>When you have defined your navigation steps, <code>run()</code> executes them one by one
sequentially:

</p>
<pre><code class="js">casper.run();</code></pre>
<p><span class="label label-info">Note</span> The callback/listener stuff is an
implementation of the <a href="http://blog.thepete.net/blog/2011/07/02/javascript-promises/">Promise pattern</a>.

</p>
<hr>
<h2 id="faq-parallel">Is it possible to achieve parallel browsing using CasperJS?</h2>

<p><a href="https://groups.google.com/d/topic/casperjs/Scx4Cjqp7hE/discussion">Officially no</a>,
but you may want to try.

</p>
<hr>
<h2 id="faq-javascript">Okay, honestly, I'm stuck with Javascript.</h2>

<p>Don't worry, you're not alone. Javascript is a great language, but it's far more
difficult to master than one might expect at first look.

</p>
<p>Here are some great resources to get started efficiently with the language:

</p>
<ul>
<li>Learn and practice Javascript online at <a href="http://www.codecademy.com/tracks/javascript">Code Academy</a></li>
<li><a href="http://eloquentjavascript.net/contents.html">Eloquent Javascript</a></li>
<li><a href="http://www.javascriptenlightenment.com/JavaScript_Enlightenment.pdf">JavaScript Enlightenment</a> (PDF)</li>
<li>last, a <a href="http://ejohn.org/apps/learn/">great tutorial on Advanced Javascript Techniques</a>
by John Resig, the author of jQuery. If you master this one, you're almost done with
the language.</li>
</ul>
</div>
        <div class="span4 apitoc">
            <div class="wrapper section-toc"><h3>FAQ list</h3>
<ul>
<li><a href="#faq-nodejs">Is CasperJS a nodejs library?</a></li>
<li><a href="#faq-help">I'm stuck! What can I do?</a></li>
<li><a href="#faq-modularization">I keep copy and pasting stuff in my test scripts, that's boring</a></li>
<li><a href="#faq-versioning">What is the versioning policy of CasperJS?</a></li>
<li><a href="#faq-jquery">Can I use jQuery with CasperJS?</a></li>
<li><a href="#faq-executable">Can I use CasperJS without using the casperjs executable?</a></li>
<li><a href="#faq-httpstatuses">How can I catch HTTP 404 and other status codes?</a></li>
<li><a href="#faq-utils">What's this mysterious <em>_<em>utils_</em></em> object?</a></li>
<li><a href="#faq-step-stack">How does <em>then()</em> and the step stack work?</a></li>
<li><a href="#faq-parallel">Is it possible to achieve parallel browsing using CasperJS?</a></li>
<li><a href="#faq-javascript">Okay, honestly, I'm stuck with Javascript.</a></li>
</ul>
<p><span class="label label-info">Contribute</span> If you want to contribute FAQs
to this section, feel free to fork the <a href="https://github.com/n1k0/casperjs/tree/gh-pages">documentation pages branch on
github</a>, and send me a
pull request with your tips and tricks!
</p>
</div>
        </div>
    </div>
</section>
</div>
        <footer>
            <hr>
            <p>
                © 2011-2012 <a href="https://nicolas.perriault.net/">Nicolas Perriault</a> — get
                the source code on GitHub: <a href="http://github.com/n1k0/casperjs">n1k0/casperjs</a> —
                logo by <a href="http://www.forveillejeremy.com/">Jeremy Forveille</a> -
                <a href="https://plus.google.com/106641872690063476159" rel="publisher">Google+</a> -
                <a href="http://flattr.com/thing/586241/CasperJS-a-navigation-scripting-and-testing-utility-for-PhantomJS" class="flattr" target="_blank"><img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0"></a>
            </p>
        </footer>
    </div>
    <script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script src="https://apis.google.com/_/scs/apps-static/_/js/k=oz.gapi.en_US.aC153Op3jI4.O/m=plusone/am=iQ/rt=j/d=1/rs=AItRSTMPX2zG_nbZsQarPgvN-p6wjawifQ/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js" gapi_processed="true"></script><script type="text/javascript" src="js/jquery.min.js?1355807353322"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js?1355807353322"></script>
    <script type="text/javascript" src="prettify/prettify.js?1355807353322"></script>
    <script type="text/javascript" src="js/application.js?1355807353322"></script>
    <script type="text/javascript">
    (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
    </script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-71239-7']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>


</body></html>