<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="http://casperjs.org/">
    <title>CasperJS, a navigation scripting and testing utility for PhantomJS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="keywords" content="phantomjs, phantom, casperjs, casper, browser, javascript, navigation, scripting, test, testing, scrape, scraping">
    <meta name="description" content="CasperJS is a browser navigation scripting &amp; testing utility written in Javascript on top of PhantomJS.">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Asap:400,700,400italic,700italic&amp;subset=latin,latin-ext">
    <link rel="stylesheet" href="prettify/prettify.css">
    <link rel="stylesheet" href="css/casper.css">
    <link rel="shortcut icon" href="favicon.ico">
  </head>
  <body data-spy="scroll" data-offset="50">
    <a href="http://github.com/n1k0/casperjs" class="contribute">
      <img src="https://a248.e.akamai.net/assets.github.com/img/30f550e0d38ceb6ef5b81500c64d970b7fb0f028/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub">
    </a>
    <div class="navbar navbar-fixed-top" data-spy="scroll" id="topbar">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="index.html">CasperJS</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="#installation">Install</a></li>
              <li><a href="#quickstart">Quickstart</a></li>
              <li><a href="#apidoc">API</a></li>
              <li><a href="#cli"><acronym title="Command Line Interface">CLI</acronym></a></li>
              <li><a href="#events-filters">Events</a></li>
              <li><a href="#client-side-utils">Client-side utils</a></li>
              <li><a href="#logging">Logging</a></li>
              <li><a href="#extending">Extending</a></li>
              <li><a href="#testing">Testing</a></li>
              <li><a href="#faq"><acronym title="Frequently Asked Questions">FAQ</acronym></a></li>
              <li><a href="#download">Download</a></li>
              <li><a href="https://groups.google.com/forum/#!forum/casperjs">Support</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="container" id="overview">
      <div class="content">
        <section id="about"><div class="page-header">
  <h1>
    CasperJS
    <small>
      is a navigation scripting &amp; testing utility for
      <a href="http://phantomjs.org/">PhantomJS</a>, written in
      Javascript
    </small>
  </h1>
</div>
<div class="row">
  <div class="span8">
    <article class="alert just-informative">
      <p>
        CasperJS is an open source <strong>navigation scripting &amp;
        testing utility</strong> written in Javascript and based on
        <a href="http://www.phantomjs.org/">PhantomJS</a> â€” the scriptable
        headless <a href="http://www.webkit.org/">WebKit</a>
        engine. It eases the process of <strong>defining a full navigation
        scenario</strong> and provides useful <strong>high-level functions,
        methods &amp; syntactic sugar</strong> for doing common tasks such as:
      </p>
      <ul>
        <li>defining &amp; ordering browsing navigation steps</li>
        <li>filling &amp; submitting forms</li>
        <li>clicking &amp; following links</li>
        <li>capturing screenshots of a page (or part of it)</li>
        <li>making assertions on remote DOM</li>
        <li>logging events</li>
        <li>downloading resources, including binary ones</li>
        <li>writing functional test suites, saving results as JUnit XML</li>
        <li>scraping Web contents</li>
      </ul>
    </article>
  </div>
  <aside class="span4 download">
    <h1>Download</h1>
    <p>
      CasperJS latest released version is <strong>0.6.4</strong>,<br>
      see the <a href="https://github.com/n1k0/casperjs/blob/master/CHANGELOG.md#files">CHANGELOG</a>.
    </p>
    <div class="dl-links">
      <p>
        <a href="https://github.com/n1k0/casperjs/zipball/0.6.4" class="btn btn-success">
          Download as .zip archive
        </a>
      </p>
      <p>
        <a href="https://github.com/n1k0/casperjs/tarball/0.6.4" class="btn btn-success">
          Download as .tar.gz archive
        </a>
      </p>
    </div>
    <p>
      Or download CasperJS at <a href="http://jspkg.com/packages/casperjs">jspkg.com</a>
    </p>
    <p class="social center">
      <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://casperjs.org/" data-via="casper_js" data-hashtags="casperjs">Tweet</a>
    </p>
  </aside>
</div>
<div class="row">
  <article class="span5">
    <h1>Get started</h1>
    <p>
      Browse the <a href="https://github.com/n1k0/casperjs/tree/master/samples">sample
      examples repository</a>.
      Get <a href="https://groups.google.com/forum/#!forum/casperjs">support</a>.
      Checkout the <a href="https://github.com/n1k0/casperjs">code at Github</a>.
      Don't hesitate to fork and send a pull request for any cool example
      of yours as well! Troubleshooting? Read the <a href="#faq">FAQ</a> or
      <a href="https://github.com/n1k0/casperjs/issues">open an issue</a>. Follow
      <a href="https://twitter.com/casperjs_org">@casperjs_org</a> on Twitter.
    </p>
  </article>
  <div class="span7 demo">
    <p class="center"><img alt="" src="images/demo.png"></p>
  </div>
</div></section>
        <section id="installation">
          <div class="page-header">
            <h1>Installation</h1>
          </div>
          <div id="installation_contents"><p><a href="http://phantomjs.org/">PhantomJS</a> &gt;= 1.3 must be installed. Check out
<a href="http://code.google.com/p/phantomjs/wiki/Installation">PhantomJS' installation
instructions</a>. Once
PhantomJS's installed on your machine, you should obtain something like this:

</p>
<pre><code>$ phantomjs --version
1.4.1</code></pre>
<p>Now just follow these instructions:

</p>
<pre><code>$ git clone git://github.com/n1k0/casperjs.git
$ cd casperjs
$ git checkout tags/0.6.4
$ ln -sf `pwd`/bin/casperjs /usr/local/bin/casperjs</code></pre>
<p>So now you should get something like this:

</p>
<pre><code>$ casperjs --version
0.6.4</code></pre>
<p>You are now ready to write your first script!

</p>
<p><span class="label label-info">Note</span> The casperjs executable is written
in <a href="http://python.org/">Python</a>, so you can also run it using the python command:

</p>
<pre><code>$ python /path/to/casperjs/bin/casperjs
CasperJS version 0.6.4 at /Users/niko/casperjs
Usage: casperjs script.(js|coffee) [options...]
Read the docs http://casperjs.org/</code></pre>
<p><span class="label label-info">Note</span> If for some reason you don't have
access to Python, please check this FAQ entry.
</p>
</div>
        </section>
        <section id="quickstart">
          <div class="page-header">
            <h1>Quickstart</h1>
          </div>
          <div id="quickstart_contents"><p>In the following example, we'll query google for two terms consecutively,
<em>"capserjs"</em> and <em>"phantomjs"</em>, aggregate the result links in a standard <code>Array</code>
and output the result to the console.

</p>
<p>Fire up your favorite editor and save the javascript code below in a
<code>googlelinks.js</code> file:

</p>
<pre><code class="javascript">var links = [];
var casper = require('casper').create();

function getLinks() {
    var links = document.querySelectorAll('h3.r a');
    return Array.prototype.map.call(links, function(e) {
        return e.getAttribute('href')
    });
}

casper.start('http://google.fr/', function() {
    // search for 'casperjs' from google form
    this.fill('form[name=f]', { q: 'casperjs' }, true);
});

casper.then(function() {
    // aggregate results for the 'casperjs' search
    links = this.evaluate(getLinks);
    // now search for 'phantomjs' by filling the form again
    this.fill('form[name=f]', { q: 'phantomjs' }, true);
});

casper.then(function() {
    // aggregate results for the 'phantomjs' search
    links = links.concat(this.evaluate(getLinks));
});

casper.run(function() {
    // echo results in some pretty fashion
    this.echo(links.length + ' links found:');
    this.echo(' - ' + links.join('\n - ')).exit();
});</code></pre>
<p>Run it:

</p>
<pre><code>$ casperjs googlelinks.js
20 links found:
 - https://github.com/n1k0/casperjs
 - https://github.com/n1k0/casperjs/issues/2
 - https://github.com/n1k0/casperjs/tree/master/samples
 - https://github.com/n1k0/casperjs/commits/master/
 - http://www.facebook.com/people/Casper-Js/100000337260665
 - http://www.facebook.com/public/Casper-Js
 - http://hashtags.org/tag/CasperJS/
 - http://www.zerotohundred.com/newforums/members/casper-js.html
 - http://www.yellowpages.com/casper-wy/j-s-enterprises
 - http://local.trib.com/casper+wy/j+s+chinese+restaurant.zq.html
 - http://www.phantomjs.org/
 - http://code.google.com/p/phantomjs/
 - http://code.google.com/p/phantomjs/wiki/QuickStart
 - http://svay.com/blog/index/post/2011/08/31/Paris-JS-10-%3A-Introduction-%C3%A0-PhantomJS
 - https://github.com/ariya/phantomjs
 - http://dailyjs.com/2011/01/28/phantoms/
 - http://css.dzone.com/articles/phantom-js-alternative
 - http://pilvee.com/blog/tag/phantom-js/
 - http://ariya.blogspot.com/2011/01/phantomjs-minimalistic-headless-webkit.html
 - http://www.readwriteweb.com/hack/2011/03/phantomjs-the-power-of-webkit.php</code></pre>
<h3>CoffeeScript</h3>
<p>You can also write Casper scripts using the <a href="http://jashkenas.github.com/coffee-script/">CoffeeScript
syntax</a>:

</p>
<pre><code class="coffeescript">getLinks = -&gt;
  links = document.querySelectorAll "h3.r a"
  Array::map.call links, (e) -&gt; e.getAttribute "href"

links = []
casper = require('casper').create()

casper.start "http://google.fr/", -&gt;
  # search for 'casperjs' from google form
  @fill "form[name=f]", q: "casperjs", true

casper.then -&gt;
  # aggregate results for the 'casperjs' search
  links = @evaluate getLinks
  # search for 'phantomjs' from google form
  @fill "form[name=f]", q: "phantomjs", true

casper.then -&gt;
  # concat results for the 'phantomjs' search
  links = links.concat @evaluate(getLinks)

casper.run -&gt;
  # display results
  @echo links.length + " links found:"
  @echo(" - " + links.join("\n - ")).exit()</code></pre>
<p>Just remember to suffix your script with the <code>.coffee</code>extension.
</p>
</div>
        </section>
        <section id="apidoc">
          <div class="page-header">
            <h1>API Documentation</h1>
          </div>
          <div class="row">
            <div class="span9" id="apidoc_contents"><p>Casper source code is quite heavily documented using <code>jsdoc</code>, but below
you'll find the whole API documentation with sample code.

</p>
<h2>The Casper class</h2>
<p>The most easiest way to instantiate a casper instance is to use the
module <code>create()</code> method:

</p>
<pre><code class="javascript">var casper = require('casper').create();</code></pre>
<p>But you can also retrieve the main Function and instantiate it by
yourself:

</p>
<pre><code class="javascript">var casper = new require('casper').Casper();</code></pre>
<h3 id="phantom_Casper_options"><code>Casper([Object options])</code></h3>

<p>Both the <code>Casper</code> constructor and the <code>create()</code> function accept a
single <code>options</code> argument which is a standard javascript object:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    loadImages: false,
    loadPlugins: false
});</code></pre>
<h2>Casper options</h2>
<p>All the available options are detailled below:

</p>
<table class="table table-striped table-condensed" caption="Casper options">
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Default</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>clientScripts</code></td>
      <td><code>Array</code></td>
      <td><code>[]</code></td>
      <td>
        A collection of script filepaths to include to every
        page loaded
      </td>
    </tr>
    <tr>
      <td><code>faultTolerant</code></td>
      <td><code>Boolean</code></td>
      <td><code>true</code></td>
      <td>
        Catch and log exceptions when executing steps in a
        non-blocking fashion
      </td>
    </tr>
    <tr>
      <td><code>httpStatusHandlers</code></td>
      <td><code>Object</code></td>
      <td><code>{}</code></td>
      <td>
        A javascript Object containing functions to call when a
        requested resource has a given HTTP status code. A
        <a href="https://github.com/n1k0/casperjs/blob/master/samples/statushandlers.js">dedicated
        sample</a> is provided as an example.
      </td>
    </tr>
    <tr>
      <td><code>logLevel</code></td>
      <td><code>String</code></td>
      <td><code>"error"</code></td>
      <td>
        Logging level (see the <a href="#logging">logging
        section</a> for more informations)
      </td>
    </tr>
    <tr>
      <td><code>onAlert</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        A function to be called when a javascript <code>alert()</code>
        is triggered
      </td>
    </tr>
    <tr>
      <td><code>onDie</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        A function to be called when <code>Casper#die()</code>
        is called
      </td>
    </tr>
    <tr>
      <td><code>onError</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        A function to be called when an <code>"error"</code>
        level event occurs
      </td>
    </tr>
    <tr>
      <td><code>onLoadError</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        A function to be called when a requested resource cannot
        be loaded
      </td>
    </tr>
    <tr>
      <td><code>onPageInitialized</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>A function to be called after <code>WebPage</code>
        instance has been initialized</td>
    </tr>
    <tr>
      <td><code>onResourceReceived</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        Proxy method for PhantomJS' <code>WebPage#onResourceReceived()</code>
        callback, but the current Casper instance is passed as
        first argument.
      </td>
    </tr>
    <tr>
      <td><code>onResourceRequested</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>
        Proxy method for PhantomJS' <code>WebPage#onResourceRequested()</code>
        callback, but the current Casper instance is passed as
        first argument.
      </td>
    </tr>
    <tr>
      <td><code>onStepComplete</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td>A function to be executed when a step function execution
        is finished.</td>
    </tr>
    <tr>
      <td><code>onStepTimeout</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td> A function to be executed when a step function
        execution time exceeds the value of the <code>stepTimeout</code>
        option, if any has been set. </td>
    </tr>
    <tr>
      <td><code>onTimeout</code></td>
      <td><code>Function</code></td>
      <td><code>null</code></td>
      <td> A function to be executed when script execution time
        exceeds the value of the <code>timeout</code> option, if
        any has been set. </td>
    </tr>
    <tr>
      <td><code>page</code></td>
      <td><code>WebPage</code></td>
      <td><code>null</code></td>
      <td>An existing <code>WebPage</code> instance</td>
    </tr>
    <tr>
      <td><code>pageSettings</code></td>
      <td><code>Object</code></td>
      <td><code>{}</code></td>
      <td>
        <p>
          PhantomJS's <code>WebPage</code> settings object.
          <a href="http://code.google.com/p/phantomjs/wiki/Interface#settings_(object)">Available settings</a> are:
        </p>
        <ul>
          <li>
            <code>javascriptEnabled</code> defines whether to execute the
            script in the page or not (default to true)
          </li>
          <li>
            <code>loadImages</code> defines whether to load the inlined images
            or not
          </li>
          <li>
            <code>loadPlugins</code> defines whether to load NPAPI plugins
            (Flash, Silverlight, ...) or not
          </li>
          <li>
            <code>localToRemoteUrlAccessEnabled</code> defines whether local
            resource (e.g. from file) can access remote URLs or not (default to false)
          </li>
          <li>
            <code>userAgent</code> defines the user agent sent to server when
            the web page requests resources.
          </li>
          <li>
            <code>userName</code> sets the user name used for HTTP
            authentication
          </li>
          <li>
            <code>password</code> sets the password used for HTTP
            authentication
          </li>
          <li>
            <code>XSSAuditingEnabled</code> defines whether load requests
            should be monitored for cross-site scripting attempts (default to
              false)
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td><code>stepTimeout</code></td>
      <td><code>Number</code></td>
      <td><code>null</code></td>
      <td> Max step timeout in milliseconds; when set, every
        defined step function will have to execute before this
        timeout value has been reached. You can define the <code>onStepTimeout()</code>
        callback to catch such a case. By default, the script will
        <code>die()</code> with an error message. </td>
    </tr>
    <tr>
      <td><code>timeout</code></td>
      <td><code>Number</code></td>
      <td><code>null</code></td>
      <td>Max timeout in milliseconds</td>
    </tr>
    <tr>
      <td><code>verbose</code></td>
      <td><code>Boolean</code></td>
      <td><code>false</code></td>
      <td>Realtime output of log messages</td>
    </tr>
    <tr>
      <td><code>viewportSize</code></td>
      <td><code>Object</code></td>
      <td><code>null</code></td>
      <td>Viewport size, eg. <code>{width: 800, height: 600}</code></td>
    </tr>
  </tbody>
</table>

<p><strong>Example:</strong>

</p>
<pre><code class="javascript">var casper = require('casper').create({
    clientScripts:  [
        'includes/jquery.js',      // These two scripts will be injected in remote
        'includes/underscore.js'   // DOM on every request
    ],
    logLevel: "info",              // Only "info" level messages will be logged
    onError: function(self, m) {   // Any "error" level message will be written
        console.log('FATAL:' + m); // on the console output and PhantomJS will
        self.exit();               // terminate
    },
    pageSettings: {
        loadImages:  false,        // The WebPage instance used by Casper will
        loadPlugins: false         // use these settings
    }
});</code></pre>
<p>But no worry, usually you'll just need to instantiate Casper using
<code>require('casper').create()</code>.

</p>
<h3 id="phantom_Casper_back"><code>Casper#back()</code></h3>

<p>Moves back a step in browser's history.

</p>
<pre><code class="javascript">casper.start('http://foo.bar/1')
casper.thenOpen('http://foo.bar/2');
casper.thenOpen('http://foo.bar/3');
casper.back();
casper.run(function() {
    console.log(this.getCurrentUrl()); // 'http://foo.bar/2'
});</code></pre>
<p>Also have a look at <a href="#phantom_Casper_forward"><code>Casper.forward()</code></a>.

</p>
<h3 id="phantom_Casper_base64encode"><code>Casper#base64encode(String url [, String method, Object data])</code></h3>

<p>Encodes a resource using the base64 algorithm synchroneously using
client-side XMLHttpRequest.

</p>
<p><span class="label label-info">Note</span> We cannot use <code>window.btoa()</code>
because it fails miserably in the version of WebKit shipping with PhantomJS.

</p>
<p>Example: retrieving google logo image encoded in base64:

</p>
<pre><code class="javascript">var base64logo = null;
casper.start('http://www.google.fr/', function() {
    base64logo = this.base64encode('http://www.google.fr/images/srpr/logo3w.png');
});

casper.run(function() {
    this.echo(base64logo).exit();
});</code></pre>
<p>You can also perform an HTTP POST request to retrieve the contents to
encode:

</p>
<pre><code class="javascript">var base46contents = null;
casper.start('http://domain.tld/download.html', function() {
    base46contents = this.base64encode('http://domain.tld/', 'POST', {
        param1: 'foo',
        param2: 'bar'
    });
});</code></pre>
<pre><code class="javascript">casper.run(function() {
    this.echo(base46contents).exit();
});</code></pre>
<h3 id="phantom_Casper_click"><code>Casper#click(String selector)</code></h3>

<p>Emulates a click on the element from the provided selector using the
mouse pointer, if possible.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.fr/');

casper.thenEvaluate(function(term) {
    document.querySelector('input[name="q"]').setAttribute('value', term);
    document.querySelector('form[name="f"]').submit();
}, { term: 'CasperJS' });

casper.then(function() {
    // Click on 1st result link
    this.click('h3.r a');
});

casper.then(function() {
    console.log('clicked ok, new location is ' + this.getCurrentUrl());
});

casper.run();</code></pre>
<p><span class="label label-info">Hint</span> If you want the mouse to click a
given point within the viewport area, you can use the <code>mouse</code> property of the
<code>Casper</code> instance:

</p>
<pre><code class="javascript">casper.then(function() {
    this.mouse.click(150, 200);
});</code></pre>
<h3 id="phantom_Casper_capture"><code>Casper#capture(String targetFilepath, Object clipRect)</code></h3>

<p>Proxy method for PhantomJS' <code>WebPage#render</code>. Adds a clipRect parameter
for automatically setting page clipRect setting values and sets it back
once done.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.capture('google.png', {
        top: 100,
        left: 100,
        width: 500,
        height: 400
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_captureSelector"><code>Casper#captureSelector(String targetFile, String selector)</code></h3>

<p>Captures the page area containing the provided selector.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.weather.com/', function() {
    this.captureSelector('weather.png', '.twc-story-block');
});

casper.run();</code></pre>
<h3 id="phantom_Casper_debugHTML"><code>Casper#debugHTML()</code></h3>

<p>Logs the HTML code of the current page directly to the standard output,
for debugging purpose.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.debugHTML();
});

casper.run();</code></pre>
<h3 id="phantom_Casper_debugPage"><code>Casper#debugPage()</code></h3>

<p>Logs the textual contents of the current page directly to the standard
output, for debugging purpose.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.debugPage();
});

casper.run();</code></pre>
<h3 id="phantom_Casper_die"><code>Casper#die(String message[, int  status])</code></h3>

<p>Exits phantom with a logged error message and an optional exit status
code.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.die("Fail.", 1);
});

casper.run();</code></pre>
<h3 id="phantom_Casper_download"><code>Casper#download(String url)</code></h3>

<p>Saves a remote resource onto the filesystem.

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    var logoUrl = 'http://www.google.fr/intl/fr/about/corporate/company/';
    this.download(logoUrl, 'google_company.html');
});

casper.run(function() {
    this.echo('Done.').exit();
});</code></pre>
<h3 id="phantom_Casper_each"><code>Casper#each(Array array,  Function fn)</code></h3>

<p>Iterates over provided array items and execute a callback.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">var links = [
    'http://google.com/',
    'http://yahoo.com/',
    'http://bing.com/'
];

casper.start().each(links, function(self, link) {
    self.thenOpen(link, function() {
        this.echo(this.getTitle());
    });
});

casper.run();</code></pre>
<p><span class="label label-info">Hint</span> Have a look at the
<a href="https://github.com/n1k0/casperjs/blob/master/samples/googlematch.js">googlematch.js</a>
sample script for concrete usecase.

</p>
<h3 id="phantom_Casper_echo"><code>Casper#echo(String message[, String style])</code></h3>

<p>Prints something to stdout, optionnaly with some fancy color (see the
<a href="#colorizer"><code>Colorizer</code></a> section of this document for more
information).

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.echo('Page title is: ' + this.evaluate(function() {
        return document.title;
    }), 'INFO'); // Will be printed in green on the console
});

casper.run();</code></pre>
<h3 id="phantom_Casper_evaluate"><code>Casper#evaluate(function  fn[, Object replacements])</code></h3>

<p>Evaluates an expression in the page context, a bit like what PhantomJS'
<code>WebPage#evaluate</code> does, but can also handle passed arguments if you
define their context:

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.evaluate(function(username, password) {
    document.querySelector('#username').value = username;
    document.querySelector('#password').value = password;
    document.querySelector('#submit').click();
}, {
    username: 'sheldon.cooper',
    password: 'b4z1ng4'
});</code></pre>
<p><span class="label label-info">Note</span> For filling and submitting forms, rather use the
<a href="#phantom_Casper_fill"><code>Casper#fill()</code></a> method.

</p>
<h3 id="phantom_Casper_evaluateOrDie"><code>Casper#evaluateOrDie(function  fn[, String message])</code></h3>

<p>Evaluates an expression within the current page DOM and <code>die()</code> if it
returns anything but <code>true</code>.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://foo.bar/home', function() {
    this.evaluateOrDie(function() {
        return /logged in/.match(document.title);
    }, 'not authenticated');
});

casper.run();</code></pre>
<h3 id="phantom_Casper_exit"><code>Casper#exit([int status])</code></h3>

<p>Exits PhantomJS with an optional exit status code.

</p>
<h3 id="phantom_Casper_exists"><code>Casper#exists(String selector)</code></h3>

<p>Checks if any element within remote DOM matches the provided CSS3
selector.

</p>
<pre><code class="javascript">casper.start('http://foo.bar/home', function() {
    if (this.exists('#my_super_id')) {
        this.echo('found #my_super_id', 'INFO');
    } else {
        this.echo('#my_super_id not found', 'ERROR');
    }
});

casper.run();</code></pre>
<h3 id="phantom_Casper_forward"><code>Casper#forward()</code></h3>

<p>Moves a step forward in browser's history.

</p>
<pre><code class="javascript">casper.start('http://foo.bar/1')
casper.thenOpen('http://foo.bar/2');
casper.thenOpen('http://foo.bar/3');
casper.back();    // http://foo.bar/2
casper.back();    // http://foo.bar/1
casper.forward(); // http://foo.bar/2
casper.run();</code></pre>
<p>Also have a look at <a href="#phantom_Casper_back"><code>Casper.back()</code></a>.

</p>
<h3 id="phantom_Casper_log"><code>Casper#log(String message[, String level, String space])</code></h3>

<p>Logs a message with an optional level in an optional space. Available
levels are <code>debug</code>, <code>info</code>, <code>warning</code> and <code>error</code>. A space is a kind of
namespace you can set for filtering your logs. By default, Casper logs
messages in two distinct spaces: <code>phantom</code> and <code>remote</code>, to distinguish
what happens in the PhantomJS environment from the remote one.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.log("I'm logging an error", "error");
});

casper.run();</code></pre>
<h3 id="phantom_Casper_fill"><code>Casper#fill(String selector,  Object values[, Boolean submit])</code></h3>

<p>Fills the fields of a form with given values and optionnaly submit it.

</p>
<p>Example with this sample html form:

</p>
<pre><code class="html">&lt;form action="/contact" id="contact-form" enctype="multipart/form-data"&gt;
    &lt;input type="text" name="subject"/&gt;
    &lt;textearea name="content"&gt;&lt;/textearea&gt;
    &lt;input type="radio" name="civility" value="Mr"/&gt; Mr
    &lt;input type="radio" name="civility" value="Mrs"/&gt; Mrs
    &lt;input type="text" name="name"/&gt;
    &lt;input type="email" name="email"/&gt;
    &lt;input type="file" name="attachment"/&gt;
    &lt;input type="checkbox" name="cc"/&gt; Receive a copy
    &lt;input type="submit"/&gt;
&lt;/form&gt;</code></pre>
<p>A script to fill and submit this form:

</p>
<pre><code class="javascript">casper.start('http://some.tld/contact.form', function() {
    this.fill('form#contact-form', {
        'subject':    'I am watching you',
        'content':    'So be careful.',
        'civility':   'Mr',
        'name':       'Chuck Norris',
        'email':      'chuck@norris.com',
        'cc':         true,
        'attachment': '/Users/chuck/roundhousekick.doc'
    }, true);
});

casper.then(function() {
    this.evaluateOrDie(function() {
        return /message sent/.test(document.body.innerText);
    }, 'sending message failed');
});

casper.run(function() {
    this.echo('message sent').exit();
});</code></pre>
<p>Please Don't use CasperJS nor PhantomJS to send spam, or I'll be calling
the Chuck. More seriously, please just don't.

</p>
<h3 id="phantom_Casper_getCurrentUrl"><code>Casper#getCurrentUrl()</code></h3>

<p>Retrieves current page URL. <span class="label label-info">Note</span> the url
will be url-decoded.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.echo(this.getCurrentUrl()); // "http://www.google.fr/"
});

casper.run();</code></pre>
<h3 id="phantom_Casper_getGlobal"><code>Casper#getGlobal(String name)</code></h3>

<p>Retrieves a global variable value within the remote DOM environment by
its name.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.echo(this.getGlobal('innerWidth')); // 1024
});

casper.run();</code></pre>
<h3 id="phantom_Casper_getTitle"><code>Casper#getTitle()</code></h3>

<p>Retrieves current page title.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.fr/', function() {
    this.echo(this.getTitle()); // "Google"
});

casper.run();</code></pre>
<h3 id="phantom_Casper_mouseClick"><code>Casper#mouseClick(String selector)</code></h3>

<p>Warning This method has been deprecated since 0.6. Use
<a href="#phantom_Casper_click"><code>Casper.click()</code></a> instead.

</p>
<h3 id="phantom_Casper_open"><code>Casper#open(String location, Object Settings)</code></h3>

<p>Performs an HTTP request for opening a given location. You can forge
<code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code> and <code>HEAD</code> requests.

</p>
<p><strong>Example for a standard <code>GET</code> request:</strong>

</p>
<pre><code class="javascript">casper.start();

casper.open('http://www.google.com/').then(function() {
    this.echo('GOT it.');
});

casper.run();</code></pre>
<p><strong>Example for a <code>POST</code> request:</strong>

</p>
<pre><code class="javascript">casper.start();

casper.open('http://some.testserver.com/post.php', {
    method: 'post',
    data:   {
        'title': 'Plop',
        'body':  'Wow.'
    }
});

casper.then(function() {
    this.echo('POSTED it.');
});

casper.run();</code></pre>
<p>Warning PhantomJS 1.4.0 and 1.4.1 have introduced a
<a href="http://code.google.com/p/phantomjs/issues/detail?id=337">regression</a>
with POST requests preventing data to be actually submitted; so please
check you're using a more recent or patched version of PhantomJS before
reporting any issue regarding this bug. PhantomJS 1.3 is not affected by
the bug.

</p>
<h3 id="phantom_Casper_repeat"><code>Casper#repeat(int times,  function then)</code></h3>

<p>Repeats a navigation step a given number of times.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">var i = 0;
casper.start('http://foo.bar/home', function() {
    this.evaluateOrDie(function() {
        return /logged in/.match(document.title);
    }, 'not authenticated');
});

casper.repeat(5, function() {
    this.echo("I am step #" + ++i);
});

casper.run();</code></pre>
<h3 id="phantom_Casper_resourceExists"><code>Casper#resourceExists(Mixed  test)</code></h3>

<p>Checks if a resource has been loaded. You can pass either a function or
a string to perform the test.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://www.google.com/', function() {
    if (this.resourceExists('logo3w.png')) {
        this.echo('Google logo loaded');
    } else {
        this.echo('Google logo not loaded', 'ERROR');
    }
});

casper.run();</code></pre>
<h3 id="phantom_Casper_run"><code>Casper#run(fn onComplete[, int  time])</code></h3>

<p>Runs the whole suite of steps and optionally executes a callback when
they've all been done. Obviously, <strong>calling this method is mandatory</strong>
in order to run the Casper navigation suite.

</p>
<p>Casper suite <strong>won't run</strong>:

</p>
<pre><code class="javascript">casper.start('http://foo.bar/home', function() {
    // ...
});

// hey, it's missing .run() here!</code></pre>
<p>Casper suite <strong>will run</strong>:

</p>
<pre><code class="javascript">casper.start('http://foo.bar/home', function() {
    // ...
});

casper.run();</code></pre>
<p><code>Casper.run()</code> also accepts an <code>onComplete</code> callback, which you can
consider as a custom final step to perform when all te other steps has
been executed. Just don't forget to <code>exit()</code> Casper if you define one!

</p>
<pre><code class="javascript">casper.start('http://foo.bar/home', function() {
    // ...
});

casper.then(function() {
    // ...
});

casper.run(function() {
    this.echo('So the whole suite ended.');
    this.exit(); // &lt;--- don't forget me!
});</code></pre>
<h3 id="phantom_Casper_setHttpauth"><code>Casper#setHttpauth(String username, String password)</code></h3>

<p>Sets <code>HTTP_AUTH_USER</code> and <code>HTTP_AUTH_PW</code> for HTTP based authentication
systems.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start();

casper.setHttpAuth('sheldon.cooper', 'b4z1ng4');

casper.thenOpen('http://password-protected.domain.tld/', function() {
    this.echo("I'm in. Bazinga.");
})
casper.run();</code></pre>
<p>Of course you can directly pass the auth string in the url to open:

</p>
<pre><code class="javascript">var url = 'http://sheldon.cooper:b4z1ng4@password-protected.domain.tld/';
casper.start(url, function() {
    this.echo("I'm in. Bazinga.");
})
casper.run();</code></pre>
<h3 id="phantom_Casper_start"><code>Casper#start(String url[, function then])</code></h3>

<p>Configures and starts Casper, then open the provided <code>url</code> and
optionnaly adds the step provided by the <code>then</code> argument.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.fr/', function() {
    this.echo("I'm loaded.");
});

casper.run();</code></pre>
<p>Alternatively:

</p>
<pre><code class="javascript">casper.start('http://google.fr/');

casper.then(function() {
    this.echo("I'm loaded.");
});

casper.run();</code></pre>
<p>Or alternatively:

</p>
<pre><code class="javascript">casper.start('http://google.fr/');

casper.then(function() {
    casper.echo("I'm loaded.");
});

casper.run();</code></pre>
<p>Or even:

</p>
<pre><code class="javascript">casper.start('http://google.fr/');

casper.then(function(self) {
    self.echo("I'm loaded.");
});

casper.run();</code></pre>
<p>Matter of taste!

</p>
<p><span class="label label-info">Note</span> <strong>You must call the <code>start()</code> method
in order to be able to add navigation steps</strong> and run the suite. If you don't
you'll get an error message inviting you to do so anyway.

</p>
<h3 id="phantom_Casper_then"><code>Casper#then(function fn)</code></h3>

<p>The standard way to add a new navigation step to the Casper suite by
provide a callback function which will be executed when the requested
page is loaded.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.fr/').then(function() {
    this.echo("I'm in your google.");
});

casper.run();</code></pre>
<p>If you want to open a page as a next step in your navigation scenario,
please refer to the <a href="#phantom_Casper_thenOpen"><code>Casper#thenOpen()</code></a>
method documentation.

</p>
<h3 id="phantom_Casper_thenEvaluate"><code>Casper#thenEvaluate(function  fn[, Object replacements])</code></h3>

<p>Adds a new navigation step to perform code evaluation within the current
retrieved page DOM.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">// Querying for "Chuck Norris" on Google
casper.start('http://google.fr/').thenEvaluate(function(term) {
    document.querySelector('input[name="q"]').setAttribute('value', term);
    document.querySelector('form[name="f"]').submit();
}, {
    term: 'Chuck Norris'
});

casper.run();</code></pre>
<h3 id="phantom_Casper_thenOpen"><code>Casper#thenOpen(String location[, function then])</code></h3>

<p>Adds a new navigation step for opening a new location, and optionnaly
add a next step when its loaded.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.fr/').then(function() {
    this.echo("I'm in your google.");
});

casper.thenOpen('http://yahoo.fr/', function() {
    this.echo("Now I'm in your yahoo.")
});

casper.run();</code></pre>
<h3 id="phantom_Casper_thenOpenAndEvaluate"><code>Casper#thenOpenAndEvaluate(String location[, function then, Object replacements])</code></h3>

<p>Basically a shortcut for opening an url and evaluate code against remote
DOM environment.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.fr/').then(function() {
    this.echo("I'm in your google.");
});

casper.thenOpenAndEvaluate('http://yahoo.fr/', function() {
    var f = document.querySelector('form');
    f.querySelector('input[name=q]').value = 'chuck norris';
    f.submit();
});

casper.run(function() {
    this.debugPage();
    this.exit();
});</code></pre>
<h3 id="phantom_Casper_viewport"><code>Casper#viewport(Number  width, Number height)</code></h3>

<p>Changes current viewport size.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.viewport(1024, 768);</code></pre>
<p><span class="label label-info">Note</span> PhantomJS comes with a default
viewport size of 400x300, and CasperJS doesn't override it by default.

</p>
<h3 id="phantom_Casper_visible"><code>Casper#visible(String selector)</code></h3>

<p>Checks if the DOM element matching the provided CSS3 selector is visible
in remote page.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://google.com/', function() {
    if (this.visible('#hplogo')) {
        this.echo("I can see the logo");
    } else {
        this.echo("I can't see the logo");
    }
});</code></pre>
<h3 id="phantom_Casper_wait"><code>Casper#wait(Number timeout[, Function then])</code></h3>

<p>Pause steps suite execution for a given amount of time, and optionnaly
execute a step on done.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://yoursite.tld/', function() {
    this.wait(1000, function() {
        this.echo("I've waited for a second.");
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_waitFor"><code>Casper#waitFor(Function  testFx[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Waits until a function returns true to process any next step.

</p>
<p>You can also set a callback on timeout using the <code>onTimeout</code> argument,
and set the timeout using the <code>timeout</code> one, in milliseconds. The
default timeout is set to 5000ms.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://yoursite.tld/', function() {
    this.waitFor(function() {
        return this.evaluate(function() {
            return document.querySelectorAll('ul.your-list li').length &gt; 2;
        });
    }, function() {
        this.captureSelector('yoursitelist.png', 'ul.your-list');
    });
});

casper.run();</code></pre>
<p>Example using the <code>onTimeout</code> callback:

</p>
<pre><code class="javascript">casper.start('http://yoursite.tld/', function() {
    this.waitFor(function() {
        return this.evaluate(function() {
            return document.querySelectorAll('ul.your-list li').length &gt; 2;
        });
    }, function() {
        this.captureSelector('yoursitelist.png', 'ul.your-list');
    }, function() {
        this.echo("I can't haz my screenshot.").exit();
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_waitForSelector"><code>Casper#waitForSelector(String selector[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Waits until an element matching the provided CSS3 selector exists in
remote DOM to process any next step. Uses
<a href="#phantom_Casper_waitFor">Casper.waitFor()</a>.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('https://twitter.com/#!/n1k0', function() {
    this.waitForSelector('.tweet-row', function() {
        this.captureSelector('twitter.png', 'html');
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_waitWhileSelector"><code>Casper#waitWhileSelector(String selector[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Waits until an element matching the provided CSS3 selector does not
exist in remote DOM to process a next step. Uses
<a href="#phantom_Casper_waitFor">Casper.waitFor()</a>.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://foo.bar/', function() {
    this.waitWhileSelector('.selector', function() {
        this.echo('.selector is no more!');
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_waitForResource"><code>Casper#waitForResource(Function  testFx[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Wait until a resource that matches the given <code>testFx</code> is loaded to
process a next step. Uses <a href="#phantom_Casper_waitFor">Casper.waitFor()</a>.

</p>
<p><strong>Example:</strong>

</p>
<pre><code class="javascript">casper.start('http://foo.bar/', function() {
    this.waitForResource(function (resource) {
        return resource.url.match("foobar.png");
    }, function() {
        this.echo('foobar.png is loaded');
    });
});

casper.run();</code></pre>
<h3 id="phantom_Casper_waitUntilVisible"><code>Casper#waitUntilVisible(String selector[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Waits until an element matching the provided CSS3 selector is visible in
the remote DOM to process a next step. Uses
<a href="#phantom_Casper_waitFor">Casper.waitFor()</a>.

</p>
<h3 id="phantom_Casper_waitWhileVisible"><code>Casper#waitWhileVisible(String selector[, Function then, Function onTimeout, Number timeout])</code></h3>

<p>Waits until an element matching the provided CSS3 selector is no longer
visible in remote DOM to process a next step. Uses
<a href="#phantom_Casper_waitFor">Casper.waitFor()</a>.
</p>
</div>
            <div class="span3 apitoc">
              <div class="wrapper" id="apidoc_toc"><h3>Quick reference</h3>
<h4>The <code>Casper</code> class</h4>
<ul>
<li><a href="#phantom_Casper_options"><code>Casper.options</code></a></li>
<li><a href="#phantom_Casper_back"><code>Casper.back()</code></a></li>
<li><a href="#phantom_Casper_base64encode"><code>Casper.base64encode()</code></a></li>
<li><a href="#phantom_Casper_click"><code>Casper.click()</code></a></li>
<li><a href="#phantom_Casper_capture"><code>Casper.capture()</code></a></li>
<li><a href="#phantom_Casper_captureSelector"><code>Casper.captureSelector()</code></a></li>
<li><a href="#phantom_Casper_debugHTML"><code>Casper.debugHTML()</code></a></li>
<li><a href="#phantom_Casper_debugPage"><code>Casper.debugPage()</code></a></li>
<li><a href="#phantom_Casper_die"><code>Casper.die()</code></a></li>
<li><a href="#phantom_Casper_download"><code>Casper.download()</code></a></li>
<li><a href="#phantom_Casper_each"><code>Casper.each()</code></a></li>
<li><a href="#phantom_Casper_echo"><code>Casper.echo()</code></a></li>
<li><a href="#phantom_Casper_evaluate"><code>Casper.evaluate()</code></a></li>
<li><a href="#phantom_Casper_evaluateOrDie"><code>Casper.evaluateOrDie()</code></a></li>
<li><a href="#phantom_Casper_exit"><code>Casper.exit()</code></a></li>
<li><a href="#phantom_Casper_forward"><code>Casper.forward()</code></a></li>
<li><a href="#phantom_Casper_log"><code>Casper.log()</code></a></li>
<li><a href="#phantom_Casper_fill"><code>Casper.fill()</code></a></li>
<li><a href="#phantom_Casper_getCurrentUrl"><code>Casper.getCurrentUrl()</code></a></li>
<li><a href="#phantom_Casper_getGlobal"><code>Casper.getGlobal()</code></a></li>
<li><a href="#phantom_Casper_getTitle"><code>Casper.getTitle()</code></a></li>
<li><a href="#phantom_Casper_mouseClick"><code>Casper.mouseClick()</code></a></li>
<li><a href="#phantom_Casper_open"><code>Casper.open()</code></a></li>
<li><a href="#phantom_Casper_repeat"><code>Casper.repeat()</code></a></li>
<li><a href="#phantom_Casper_resourceExists"><code>Casper.resourceExists()</code></a></li>
<li><a href="#phantom_Casper_run"><code>Casper.run()</code></a></li>
<li><a href="#phantom_Casper_setHttpAuth"><code>Casper.setHttpAuth()</code></a></li>
<li><a href="#phantom_Casper_start"><code>Casper.start()</code></a></li>
<li><a href="#phantom_Casper_then"><code>Casper.then()</code></a></li>
<li><a href="#phantom_Casper_thenEvaluate"><code>Casper.thenEvaluate()</code></a></li>
<li><a href="#phantom_Casper_thenOpen"><code>Casper.thenOpen()</code></a></li>
<li><a href="#phantom_Casper_thenOpenAndEvaluate"><code>Casper.thenOpenAndEvaluate()</code></a></li>
<li><a href="#phantom_Casper_viewport"><code>Casper.viewport()</code></a></li>
<li><a href="#phantom_Casper_visible"><code>Casper.visible()</code></a></li>
<li><a href="#phantom_Casper_wait"><code>Casper.wait()</code></a></li>
<li><a href="#phantom_Casper_waitFor"><code>Casper.waitFor()</code></a></li>
<li><a href="#phantom_Casper_waitForSelector"><code>Casper.waitForSelector()</code></a></li>
<li><a href="#phantom_Casper_waitWhileSelector"><code>Casper.waitWhileSelector()</code></a></li>
<li><a href="#phantom_Casper_waitForResource"><code>Casper.waitForResource()</code></a></li>
<li><a href="#phantom_Casper_waitUntilVisible"><code>Casper.waitUntilVisible()</code></a></li>
<li><a href="#phantom_Casper_waitWhileVisible"><code>Casper.waitWhileVisible()</code></a></li>
</ul>
</div>
            </div>
          </div>
        </section>
        <section id="cli">
          <div class="page-header">
            <h1>
              Command Line Interface
              <small>positional arguments &amp; options exposed</small>
            </h1>
          </div>
          <div id="cli_contents"><p>CasperJS ships with a builting command line parser on top of PhantomJS'
one, located in the <code>cli</code> module; it exposes passed arguments as
<strong>positional ones</strong> and <strong>named options</strong>

</p>
<p>But no worries for manipulating the <code>cli</code> module parsing API, a <code>Casper</code>
instance always contains a rady to use <code>cli</code> property, allowing easy
access of all these parameters.

</p>
<p>Let's consider this simple casper script:

</p>
<pre><code class="javascript">var casper = require("casper").create();

casper.echo("Casper CLI passed args:");
require("utils").dump(casper.cli.args);

casper.echo("Casper CLI passed options:");
require("utils").dump(casper.cli.options);

casper.exit();</code></pre>
<p><span class="label label-info">Note</span> Please note the two <code>casper-path</code>
and <code>cli</code> options; these are passed to the casper script through the <code>casperjs</code>
Python executable.

</p>
<p>Execution results:

</p>
<pre><code>$ casperjs test.js arg1 arg2 arg3 --foo=bar --plop anotherarg
Casper CLI passed args: [
    "arg1",
    "arg2",
    "arg3",
    "anotherarg"
]
Casper CLI passed options: {
    "casper-path": "/Users/niko/Sites/casperjs",
    "cli": true,
    "foo": "bar",
    "plop": true
}</code></pre>
<p>Getting, checking or dropping parameters:

</p>
<pre><code class="javascript">var casper = require("casper").create();
casper.echo(casper.cli.has(0));
casper.echo(casper.cli.get(0));
casper.echo(casper.cli.has(3));
casper.echo(casper.cli.get(3));
casper.echo(casper.cli.has("foo"));
casper.echo(casper.cli.get("foo"));
casper.cli.drop("foo");
casper.echo(casper.cli.has("foo"));
casper.echo(casper.cli.get("foo"));
casper.exit();</code></pre>
<p>Execution results:

</p>
<pre><code>$ casperjs test.js arg1 arg2 arg3 --foo=bar --plop anotherarg
true
arg1
true
anotherarg
true
bar
false
undefined</code></pre>
<p><span class="label label-info">Hint</span> What if you want to check if any arg
or option has been passed to your script? Here you go:

</p>
<pre><code class="javascript">// removing default options passed by the Python executable
casper.cli.drop("cli");
casper.cli.drop("casper-path");

if (casper.cli.args.length === 0 &amp;&amp; Object.keys(casper.cli.options).length === 0) {
    casper.echo("No arg nor option passed").exit();
}</code></pre>
<p>Last but not least, you can still use all PhantomJS standard CLI options
as you would do with any other phantomjs script. To remeber what they
are, just run the <code>casperjs --help</code> command:

</p>
<pre><code>$ casperjs --help
CasperJS version 0.6.4 at /Users/niko/Sites/casperjs, using PhantomJS version 1.3.0

Usage: casperjs [options] script.[js|coffee] [script argument [script argument ...]]
       casperjs [options] test [test path [test path ...]]

Options:

--cookies-file=/path/to/cookies.txt    Sets the file name to store the persistent cookies
--config=/path/to/config               Specifies path to a JSON-formatted config file
--disk-cache=[yes|no]                  Enables disk cache (at desktop services cache storage location, default is 'no')
--ignore-ssl-errors=[yes|no]           Ignores SSL errors (i.e. expired or self-signed certificate errors)
--load-images=[yes|no]                 Loads all inlined images (default is 'yes')
--load-plugins=[yes|no]                Loads all plugins (i.e. 'Flash', 'Silverlight', ...) (default is 'no')
--local-to-remote-url-access=[yes|no]  Local content can access remote URL (default is 'no')
--max-disk-cache-size=size             Limits the size of disk cache (in KB)
--output-encoding                      Sets the encoding used for terminal output (default is 'utf8')
--proxy=address:port                   Sets the network proxy (e.g. "--proxy=192.168.1.42:8080")
--script-encoding                      Sets the encoding used for the starting script (default is 'utf8')
--version                              Prints out CasperJS version</code></pre>
</div>
        </section>
        <section id="events-filters">
          <div class="page-header">
            <h1>
              Events &amp; filters
              <small>hooking &amp; altering CasperJS environement at runtime</small>
            </h1>
          </div>
          <div id="filters_contents"><p>CasperJS provides an <a href="#events">event handler</a> very similar to the
<a href="https://github.com/joyent/node/blob/master/lib/events.js">one</a> shipping
with <a href="http://nodejs.org">nodejs</a>; actually it borrows most of its
codebase. CasperJS also adds <a href="#filters"><em>filters</em></a>, which are basically
ways to alter values asynchroneously.

</p>
<hr>
<h2 id="events">Events</h2>

<p>Using events is pretty much straightforward if you're a node developer,
or if you worked with any evented system before:

</p>
<pre><code>var casper = require('casper').create();

casper.on('resource.received', function(resource) {
    casper.echo(resource.url);
});</code></pre>
<p>Here's a table containing all the available events with all the
parameters passed to their callback:

</p>
<table class="table table-striped table-condensed" caption="Casper options">
  <thead>
    <tr>
      <th>Name</th>
      <th>Arguments</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>back</code></td>
      <td>None</td>
      <td>Emitted when the embedded browser is asked to go back a step in its history.</td>
    </tr>
    <tr>
      <td><code>capture.saved</code></td>
      <td><code>targetFile</code></td>
      <td>Emitted when a screenshot image has been captured.</td>
    </tr>
    <tr>
      <td><code>click</code></td>
      <td><code>selector, fallbackToHref</code></td>
      <td>Emitted when the <code>Casper.click()</code> method has been called.</td>
    </tr>
    <tr>
      <td><code>die</code></td>
      <td><code>message, status</code></td>
      <td>Emitted when the <code>Casper.die()</code> method has been called.</td>
    </tr>
    <tr>
      <td><code>downloaded.file</code></td>
      <td><code>targetPath</code></td>
      <td>Emitted when </td>
    </tr>
    <tr>
      <td><code>exit</code></td>
      <td><code>status</code></td>
      <td>Emitted when the <code>Casper.exit()</code> method has been called.</td>
    </tr>
    <tr>
      <td><code>fill</code></td>
      <td><code>selector, vals, submit</code></td>
      <td>Emitted when a form is filled using the <code>Casper.fill()</code> method.</td>
    </tr>
    <tr>
      <td><code>forward</code></td>
      <td>None</td>
      <td>Emitted when the embedded browser is asked to go forward a step in its history.</td>
    </tr>
    <tr>
      <td><code>http.auth</code></td>
      <td><code>username, password</code></td>
      <td>Emitted when http autthentification parameters are set.</td>
    </tr>
    <tr>
      <td><code>http.status.[code]</code></td>
      <td><code>resource</code></td>
      <td>
        <p>
          Emitted when ny given HTTP reponse is received with the status code
          specified by <code>[code]</code>, eg.:
        </p>
        <pre class="prettyprint">casper.on('http.status.404', function(resource) {
    casper.echo(resource.url + ' is 404');
})</pre>
        </td>
    
    </tr><tr>
      <td><code>load.started</code></td>
      <td>None</td>
      <td>Emitted when PhantomJS' <code>WebPage.onLoadStarted</code> event callback is called.</td>
    </tr>
    <tr>
      <td><code>load.failed</code></td>
      <td><code>Object</code></td>
      <td>
        Emitted when PhantomJS' <code>WebPage.onLoadFinished</code> event callback has been called and
        failed.
      </td>
    </tr>
    <tr>
      <td><code>load.finished</code></td>
      <td><code>status</code></td>
      <td>Emitted when PhantomJS' <code>WebPage.onLoadFinished</code> event callback is called.</td>
    </tr>
    <tr>
      <td><code>log</code></td>
      <td><code>entry</code></td>
      <td>
        <p>Emitted when the <code>Casper.log()</code> method has been called. The
        <code>entry</code> parameter is an Object like this:</p>
        <pre class="prettyprint">{
    level:   "debug",
    space:   "phantom",
    message: "A message",
    time:    "a javascript Date instance"
}</pre>
      </td>
    </tr>
    <tr>
      <td><code>mouse.click</code></td>
      <td><code>args</code></td>
      <td>Emitted when the mouse left-click something or somewhere.</td>
    </tr>
    <tr>
      <td><code>mouse.down</code></td>
      <td><code>args</code></td>
      <td>Emitted when the mouse presses on something or somewhere with the left button.</td>
    </tr>
    <tr>
      <td><code>mouse.move</code></td>
      <td><code>args</code></td>
      <td>Emitted when the mouse moves onto something or somewhere.</td>
    </tr>
    <tr>
      <td><code>mouse.up</code></td>
      <td><code>args</code></td>
      <td>Emitted when the mouse releases the left button over something or somewhere.</td>
    </tr>
    <tr>
      <td><code>open</code></td>
      <td><code>location, settings</code></td>
      <td>
        <p>Emitted when an HTTP request is sent. First callback arg is
        the location, second one is a request settings Object of the form:</p>
        <pre class="prettyprint">{
    method: "post",
    data:   "foo=42&amp;chuck=norris"
}</pre>
      </td>
    </tr>
    <tr>
      <td><code>page.created</code></td>
      <td><code>page</code></td>
      <td>Emitted when PhantomJS' <code>WebPage</code> object used by CasperJS has been created.</td>
    </tr>
    <tr>
      <td><code>page.initialized</code></td>
      <td>page</td>
      <td>Emitted when PhantomJS' <code>WebPage</code> object used by CasperJS has been initialized.</td>
    </tr>
    <tr>
      <td><code>remote.alert</code></td>
      <td><code>message</code></td>
      <td>Emitted when a remote <code>alert()</code> call has been performed.</td>
    </tr>
    <tr>
      <td><code>remote.message</code></td>
      <td><code>msg</code></td>
      <td>Emitted when any remote console logging call has been performed.</td>
    </tr>
    <tr>
      <td><code>resource.received</code></td>
      <td><code>resource</code></td>
      <td>Emitted when any resource has been received.</td>
    </tr>
    <tr>
      <td><code>resource.requested</code></td>
      <td><code>request</code></td>
      <td>Emitted when any resource has been requested.</td>
    </tr>
    <tr>
      <td><code>run.complete</code></td>
      <td>None</td>
      <td>Emitted when the whole serie of steps in the stack have been executed.</td>
    </tr>
    <tr>
      <td><code>run.start</code></td>
      <td>None</td>
      <td>Emitted when <code>Casper.run()</code> is called.</td>
    </tr>
    <tr>
      <td><code>starting</code></td>
      <td>None</td>
      <td>Emitted when <code>Casper.start()</code> is called.</td>
    </tr>
    <tr>
      <td><code>started</code></td>
      <td>None</td>
      <td>Emitted when Casper has been started using <code>Casper.start()</code>.</td>
    </tr>
    <tr>
      <td><code>step.added</code></td>
      <td><code>step</code></td>
      <td>Emitted when a new navigation step has been added to the stack.</td>
    </tr>
    <tr>
      <td><code>step.complete</code></td>
      <td><code>stepResult</code></td>
      <td>Emitted when a navigation step has been executed.</td>
    </tr>
    <tr>
      <td><code>step.created</code></td>
      <td><code>fn</code></td>
      <td>Emitted when a new navigation step has been created.</td>
    </tr>
    <tr>
      <td><code>step.start</code></td>
      <td><code>step</code></td>
      <td>Emitted when a navigation step has been started.</td>
    </tr>
    <tr>
      <td><code>step.timeout</code></td>
      <td>None</td>
      <td>Emitted when a navigation step has been executed.</td>
    </tr>
    <tr>
      <td><code>timeout</code></td>
      <td>None</td>
      <td>
        Emitted when the execution time of the script has reached
        the <code>Casper.options.timeout</code> value.
      </td>
    </tr>
    <tr>
      <td><code>viewport.changed</code></td>
      <td><code>[width, height]</code></td>
      <td>Emitted when the viewport has been changed.</td>
    </tr>
    <tr>
      <td><code>wait.done</code></td>
      <td>None</td>
      <td>Emitted when a <code>Casper.wait<em>()</em></code><em> operation ends.</em></td>
    </tr>
    <tr>
      <td><code>wait.start</code></td>
      <td>None</td>
      <td>Emitted when a <code>Casper.wait()</code> operation starts.</td>
    </tr>
    <tr>
      <td><code>waitFor.timeout</code></td>
      <td>None</td>
      <td>
        Emitted when the execution time of a <code>Casper.wait*()</code>
        operation has exceeded the value of <code>Casper.options.stepTimeout</code>.
      </td>
    </tr>
  </tbody>
</table>

<h3>Emitting you own events</h3>
<p>Of course you can emit your own events, using the <code>Casper.emit()</code>
method:

</p>
<pre><code>var casper = require('casper').create();

// listening to a custom event
casper.on('google.loaded', function() {
    this.echo('Google page title is ' + this.getTitle());
});

casper.start('http://google.com/', function() {
    // emitting a custom event
    this.emit('google.loaded');
});

casper.run();</code></pre>
<hr>
<h2 id="filters">Filters</h2>

<p>Filters allow to alter some value asynchroneously. Sounds obscure? Let's
take a simple example and let's imagine you would like to alter every
single url opened by CasperJS to append a <code>foo=42</code> query string
parameter:

</p>
<pre><code>var casper = require('casper').create();

casper.setFilter('open.location', function(location) {
    return /\?+/.test(location) ? location += "&amp;foo=42" : location += "?foo=42";
});</code></pre>
<p>There you have it, every single requested url will have these appended.
Let me bet you'll find far more interesting use cases than my silly one
;)

</p>
<p>Here'a the list of all available filters with their expected return
value:

</p>
<table class="table table-striped table-condensed" caption="Casper options">
  <thead>
    <tr>
      <th>Name</th>
      <th>Arguments</th>
      <th>Return type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>capture.target_filename</code></td>
      <td><code>args</code></td>
      <td><code>String</code></td>
      <td>Allows to alter the value of the filename where a screen capture should be stored.</td>
    </tr>
    <tr>
      <td><code>echo.message</code></td>
      <td><code>message</code></td>
      <td><code>String</code></td>
      <td>Allows to alter every message written onto stdout.</td>
    </tr>
    <tr>
      <td><code>log.message</code></td>
      <td><code>message</code></td>
      <td><code>String</code></td>
      <td>Allows to alter every log message.</td>
    </tr>
    <tr>
      <td><code>open.location</code></td>
      <td><code>args</code></td>
      <td><code>String</code></td>
      <td>Allows to alter every url before it being opened.</td>
    </tr>
  </tbody>
</table>
</div>
        </section>
        <section id="client-side-utils">
          <div class="page-header">
            <h1>
              Client-side utils
              <small>utilities injected in remote DOM environment</small></h1>
          </div>
          <div class="row">
            <div class="span9" id="clientutils_contents"><p>Casper ships with a few client-side utilitites which are injected in the
remote DOM environment, and accessible from there through the
<code>__utils__</code> object instance of the <code>ClientUtils</code> class of the
<code>clientutils</code> module.

</p>
<p><span class="label label-info">Note</span> These tools are provided to avoid
coupling CasperJS to any third-party library like jQuery, Mootools or
something; but you can always include these and have them available client-side
using the <code>Casper.options.clientScripts</code> option.

</p>
<h3 id="phantom_Casper_ClientUtils_encode"><code>ClientUtils#encode(String contents)</code></h3>

<p>Encodes a string using the <a href="http://en.wikipedia.org/wiki/Base64">base64
algorithm</a>. For the records,
CasperJS doesn't use builtin <code>window.btoa()</code> function because it can't
deal efficiently with strings encoded using &gt;8b characters.

</p>
<pre><code class="javascript">var base64;
casper.start('http://foo.bar/', function() {
    base64 = this.evaluate(function() {
        return __utils__.encode("I've been a bit cryptic recently");
    };
});

casper.run(function() {
    this.echo(base64).exit();
});</code></pre>
<h3 id="phantom_Casper_ClientUtils_exists"><code>ClientUtils#exists(String selector)</code></h3>

<p>Checks if a DOM element matching a given CSS3 selector exists.

</p>
<pre><code class="javascript">var exists;
casper.start('http://foo.bar/', function() {
    exists = this.evaluate(function() {
        return __utils__.exists('#some_id');
    };
});

casper.run(function() {
    this.echo(exists).exit();
});</code></pre>
<h3 id="phantom_Casper_ClientUtils_findAll"><code>ClientUtils#findAll(String selector)</code></h3>

<p>Retrieves all DOM elements matching a given CSS3 selector.

</p>
<pre><code class="javascript">var links;
casper.start('http://foo.bar/', function() {
    links = this.evaluate(function() {
        var elements = __utils__.findAll('a.menu');
        return Array.prototype.forEach.call(elements, function(e) {
            return e.getAttribute('href');
        });
    };
});

casper.run(function() {
    this.echo(JSON.stringify(links)).exit();
});</code></pre>
<h3 id="phantom_Casper_ClientUtils_findOne"><code>ClientUtils#findOne(String selector)</code></h3>

<p>Retrieves a single DOM element by a CSS3 selector.

</p>
<pre><code class="javascript">var href;
casper.start('http://foo.bar/', function() {
    href = this.evaluate(function() {
        return __utils__.findOne('#my_id').getAttribute('href');
    };
});

casper.run(function() {
    this.echo(href).exit();
});</code></pre>
<h3 id="phantom_Casper_ClientUtils_getBase64"><code>ClientUtils#getBase64(String url[, String method, Object data])</code></h3>

<p>This method will retrieved a base64 encoded version of any resource
behind an url. For example, let's imagine we want to retrieve the base64
representation of some website's logo:

</p>
<pre><code class="javascript">var logo = null;
casper.start('http://foo.bar/', function() {
    logo = this.evaluate(function() {
        var imgUrl = document.querySelector('img.logo').getAttribute('src');
        return __utils__.getBase64(imgUrl);
    };
});

casper.run(function() {
    this.echo(logo).exit();
});</code></pre>
<h3 id="phantom_Casper_ClientUtils_getBinary"><code>ClientUtils#getBinary(String url[, String method, Object data])</code></h3>

<p>This method will retrieved the raw contents of a given binary resource;
unfortunately though, PhantomJS cannot process these data directly so
you'll have to process them within the remote DOM environment. If you
intend to download the resource, use
<a href="#phantom_Casper_ClientUtils_getBase64">ClientUtils.getBase64()</a> or
<a href="#phantom_Casper_base64encode">Casper.base64encode()</a> instead.

</p>
<pre><code class="javascript">casper.start('http://foo.bar/', function() {
    this.evaluate(function() {
        var imgUrl = document.querySelector('img.logo').getAttribute('src');
        console.log(__utils__.getBinary(imgUrl));
    };
});

casper.run();</code></pre>
<p>Warning You won't be able to pass the <em>binary string</em> from the remote
DOM environment to PhantomJS' one. For retrieving binary contents, use
<a href="#phantom_Casper_ClientUtils_encode"><code>ClientUtils.encode()</code></a>.

</p>
<h3 id="phantom_Casper_ClientUtils_visible"><code>ClientUtils#visible(String selector)</code></h3>

<p>Checks if an element is visible.

</p>
<pre><code class="javascript">casper.start('http://foo.bar/', function() {
    if (this.visible('#cain')) {
        this.echo("I CAN SEE YOU");
    }
});

casper.run();</code></pre>
</div>
            <div class="span3 apitoc">
              <div class="wrapper" id="clientutils_toc"><h3>Quick reference</h3>
<h4>The <code>ClientUtils</code> class</h4>
<ul>
<li><a href="#phantom_Casper_ClientUtils_encode"><code>ClientUtils.encode()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_exists"><code>ClientUtils.exists()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_findAll"><code>ClientUtils.findAll()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_findOne"><code>ClientUtils.findOne()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_getBase64"><code>ClientUtils.getBase64()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_getBinary"><code>ClientUtils.getBinary()</code></a></li>
<li><a href="#phantom_Casper_ClientUtils_visible"><code>ClientUtils.visible()</code></a></li>
</ul>
</div>
            </div>
          </div>
        </section>
        <section id="phantom_Casper_Tester">
          <div class="page-header">
            <h1>Tester API</h1>
          </div>
          <div class="row">
            <div class="span9" id="tester_contents"><p>Casper ships with a <code>tester</code> module and a <code>Tester</code> class providing an
API for unit &amp; functional testing purpose. By default you can access an
instance of this class through <code>test</code> property of any <code>Casper</code> class
instance.

</p>
<p><span class="label label-info">Note</span> The best way to learn how to use the
Tester API and see it in action is probably to have a look at the <a href="https://github.com/n1k0/casperjs/blob/master/tests/run.js">CasperJS
test suite code</a>.

</p>
<h3 id="phantom_Casper_Tester_assert"><code>Tester#assert(Boolean condition[, String message])</code></h3>

<p>Asserts that the provided condition strictly resolves to a boolean
<code>true</code>.

</p>
<pre><code>var url = 'http://www.google.fr/';
var casper = require('casper').create();
casper.start(url, function() {
    this.test.assert(this.getCurrentUrl() === url, 'url is the one expected');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertEquals"><code>Tester#assertEquals(mixed testValue, mixed expected[, String message])</code></h3>

<p>Asserts that two values are strictly equals.

</p>
<pre><code>var url = 'http://www.google.fr/';
var casper = require('casper').create();
casper.start(url, function() {
    this.test.assertEquals(this.getCurrentUrl(), url, 'url is the one expected');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertEval"><code>Tester#assertEval(Function fn[, String message])</code></h3>

<p>Asserts that a code evaluation in remote DOM resolves to true.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertEval(function() {
        return document.querySelectorAll('form').length &gt; 0;
    }, 'google.fr has at least one form');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertEvalEquals"><code>Tester#assertEvalEquals(Function fn, mixed expected[, String message])</code></h3>

<p>Asserts that the result of a code evaluation in remote DOM equals.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertEvalEquals(function() {
        return document.querySelectorAll('form').length;
    }, 1, 'google.fr provides a single form tag');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertExists"><code>Tester#assertExists(String selector[, String message])</code></h3>

<p>Asserts that an element matching the provided CSS3 selector exists in
remote DOM environment.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertEvalExists('form[name="gs"]', 'google.fr has a form with name "gs"');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertMatch"><code>Tester#assertMatch(mixed subject, RegExp pattern[, String message])</code></h3>

<p>Asserts that a provided string matches a provided javascript <code>RegExp</code>
pattern.

</p>
<pre><code>casper.test.assertMatch('Chuck Norris', /^chuck/i, 'Chuck Norris' first name is chuck');</code></pre>
<h3 id="phantom_Casper_Tester_assertNot"><code>Tester#assertNot(mixed subject[, String message])</code></h3>

<p>Asserts that the passed subject resolves to <code>false</code>.

</p>
<pre><code>casper.test.assertNot(false, "Universe is still operational");</code></pre>
<h3 id="phantom_Casper_Tester_assertRaises"><code>Tester#assertRaises(Function fn, Array args[, String message])</code></h3>

<p>Asserts that the provided function called with the given parameters
raises a javascript <code>Error</code>.

</p>
<pre><code>casper.test.assertRaises(function(throwIt) {
    if (throwIt) {
        throw new Error('thrown');
    }
}, [true], 'Error has been raised.');</code></pre>
<h3 id="phantom_Casper_Tester_assertSelectorExists"><code>Tester#assertSelectorExists(String selector[, String message])</code></h3>

<p>Asserts that at least an element matching the provided CSS3 selector
exists in remote DOM.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertSelectorExists('form[name="gs"]', 'google.fr provides a form');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertResourceExists"><code>Tester#assertResourceExists(Function testFx[, String message])</code></h3>

<p>The <code>testFx</code> is executed against all loaded asserts and the test passes
when at least one resource matches.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertResourceExists(function (resource) {
      return resource.url.match('logo3w.png');
    }, 'google.fr logo was loaded');
    // or shorter
    this.test.assertResourceExists('logo3w.png', 'google.fr logo was loaded');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertTitle"><code>Tester#assertTitle(String expected[, String message])</code></h3>

<p>Asserts that title of the remote page equals to the expected one.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.assertTitle('Google', 'google.fr has the correct title');
});</code></pre>
<h3 id="phantom_Casper_Tester_assertType"><code>Tester#assertType(mixed input, String type[, String message])</code></h3>

<p>Asserts that the provided input is of the given type.

</p>
<pre><code>var casper = require('casper').create();
casper.test.assertType(42, "number", "Okay, 42 is a number");
casper.test.assertType([1, 2, 3], "array", "Yeah, we can test for arrays too =)");</code></pre>
<h3 id="phantom_Casper_Tester_assertUrlMatch"><code>Tester#assertUrlMatch(Regexp pattern[, String message])</code></h3>

<p>Asserts that a the current page url matches the provided RegExp pattern.

</p>
<pre><code>var casper = require('casper').create();
casper.start('http://www.google.fr/', function() {
    this.test.asserturlMatch(/^http:\/\//', 'google.fr is served in http://');
});</code></pre>
<h3 id="phantom_Casper_Tester_colorize"><code>Tester#colorize(String message, String style)</code></h3>

<p>Render a colorized output. Basically a proxy method for
<code>Casper.Colorizer#colorize()</code>.

</p>
<h3 id="phantom_Casper_Tester_comment"><code>Tester#comment(String message)</code></h3>

<p>Writes a comment-style formatted message to stdout.

</p>
<pre><code>var casper = require('casper').create();
casper.test.comment("Hi, I'm a comment");</code></pre>
<h3 id="phantom_Casper_Tester_error"><code>Tester#error(String message)</code></h3>

<p>Writes an error-style formatted message to stdout.

</p>
<pre><code>var casper = require('casper').create();
casper.test.comment("Hi, I'm an error");</code></pre>
<h3 id="phantom_Casper_Tester_fail"><code>Tester#fail(String message)</code></h3>

<p>Adds a failed test entry to the stack.

</p>
<pre><code>var casper = require('casper').create();
casper.test.fail("Georges W. Bush");</code></pre>
<h3 id="phantom_Casper_Tester_formatMessage"><code>Tester#formatMessage(String message, String style)</code></h3>

<p>Formats a message to highlight some parts of it. Only used internally by
the tester.

</p>
<h3 id="phantom_Casper_Tester_info"><code>Tester#info(String message)</code></h3>

<p>Writes an info-style formatted message to stdout.

</p>
<pre><code>var casper = require('casper').create();
casper.test.info("Hi, I'm an informative message.");</code></pre>
<h3 id="phantom_Casper_Tester_pass"><code>Tester#pass(String message)</code></h3>

<p>Adds a successful test entry to the stack.

</p>
<pre><code>var casper = require('casper').create();
casper.test.pass("Barrack Obama");</code></pre>
<h3 id="phantom_Casper_Tester_renderResults"><code>Tester#renderResults(Boolean exit, Number status, String save)</code></h3>

<p>Render tests results, an optionnaly exit phantomjs and saves results in
a XUnit formatted file.

</p>
<pre><code>var casper = require('casper').create();
// ...
casper.run(function() {
    // exists with status code 0 and saves XUnit formatted results
    // in test-results.xml
    this.test.renderResults(true, 0, 'test-results.xml');
});</code></pre>
</div>
            <div class="span3 apitoc">
              <div class="wrapper" id="tester_toc"><h3>Quick reference</h3>
<h4>The <code>Tester</code> class</h4>
<ul>
<li><a href="#phantom_Casper_Tester_assert"><code>Tester.assert()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertEquals"><code>Tester.assertEquals()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertEval"><code>Tester.assertEval()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertEvalEquals"><code>Tester.assertEvalEquals()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertExists"><code>Tester.assertExists()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertMatch"><code>Tester.assertMatch()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertNot"><code>Tester.assertNot()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertRaises"><code>Tester.assertRaises()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertSelectorExists"><code>Tester.assertSelectorExists()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertResourceExists"><code>Tester.assertResourceExists()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertTitle"><code>Tester.assertTitle()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertType"><code>Tester.assertType()</code></a></li>
<li><a href="#phantom_Casper_Tester_assertUrlMatch"><code>Tester.assertUrlMatch()</code></a></li>
<li><a href="#phantom_Casper_Tester_colorize"><code>Tester.colorize()</code></a></li>
<li><a href="#phantom_Casper_Tester_comment"><code>Tester.comment()</code></a></li>
<li><a href="#phantom_Casper_Tester_error"><code>Tester.error()</code></a></li>
<li><a href="#phantom_Casper_Tester_fail"><code>Tester.fail()</code></a></li>
<li><a href="#phantom_Casper_Tester_formatMessage"><code>Tester.formatMessage()</code></a></li>
<li><a href="#phantom_Casper_Tester_info"><code>Tester.info()</code></a></li>
<li><a href="#phantom_Casper_Tester_pass"><code>Tester.pass()</code></a></li>
<li><a href="#phantom_Casper_Tester_renderResults"><code>Tester.renderResults()</code></a></li>
</ul>
</div>
            </div>
          </div>
        </section>
        <section id="colorizer">
          <div class="page-header">
            <h1>Colorizer <small>brings colors to your shell</small></h1>
          </div>
          <div class="row">
            <div class="span9" id="colorizer_contents"><p>Casper ships with a <code>colorizer</code> module which contains a <code>Colorizer</code>
class which can print stuff to the console output in color:

</p>
<pre><code class="javascript">var colorizer = require('colorizer').create();
console.log(colorizer.colorize("Hello World", "INFO"));</code></pre>
<p>Though most of the times you will use it transparently using the
<a href="#phantom_Casper_echo"><code>Casper.echo()</code></a> method:

</p>
<pre><code class="javascript">casper.echo('an informative message', 'INFO'); // printed in green
casper.echo('an error message', 'ERROR');      // printed in red</code></pre>
<h3>Available predefined styles</h3>
<p>Available predefined styles are:

</p>
<ul>
<li><code>ERROR</code>: white text on red background</li>
<li><code>INFO</code>: green text</li>
<li><code>TRACE</code>: green text</li>
<li><code>PARAMETER</code>: cyan text</li>
<li><code>COMMENT</code>: yellow text</li>
<li><code>WARNING</code>: red text</li>
<li><code>GREEN_BAR</code>: green text on white background</li>
<li><code>RED_BAR</code>: white text on red background</li>
<li><code>INFO_BAR</code>: cyan text</li>
</ul>
<p>Here's a sample output of what it can look like:

</p>
<p><img src="images/colorizer.png" alt="capture">

</p>
<h3 id="phantom_Casper_Colorizer_colorize"><code>Colorizer#colorize(String text, String styleName)</code></h3>

<p>Computes a colored version of the provided text string using a given
predefined style.

</p>
<pre><code class="javascript">var colorizer = require('colorizer').create();
console.log(colorizer.colorize("I'm a red error", "ERROR"));</code></pre>
<p><span class="label label-info">Note</span> Most of the time you won't have to
use a <code>Colorizer</code> instance directly as CasperJS provides all the necessary
methods.

</p>
<p>See the list of the <a href="#predefined-styles">predefined styles available</a>.

</p>
<h3 id="phantom_Casper_Colorizer_format"><code>Colorizer#format(String text, Object style)</code></h3>

<p>Formats a text string using the provided style definition. A style
definition is a standard javascript <code>Object</code> instance which can define
the following properties:

</p>
<ul>
<li>String <code>bg</code>: background color name</li>
<li>String <code>fg</code>: foreground color name</li>
<li>Boolean <code>bold</code>: apply bold formatting</li>
<li>Boolean <code>underscore</code>: apply underline formatting</li>
<li>Boolean <code>blink</code>: apply blink formatting</li>
<li>Boolean <code>reverse</code>: apply reverse formatting</li>
<li>Boolean <code>conceal</code>: apply conceal formatting</li>
</ul>
<p><span class="label label-info">Note</span> Available color names are <code>black</code>,
<code>red</code>, <code>green</code>, <code>yellow</code>, <code>blue</code>, <code>magenta</code>, <code>cyan</code> and <code>white</code>.

</p>
<pre><code class="javascript">var colorizer = require('colorizer').create();
colorizer.format("We all live in a yellow submarine", {
    bg:   'yellow',
    fg:   'blue',
    bold: true
});</code></pre>
</div>
            <div class="span3 apitoc">
              <div class="wrapper" id="colorizer_toc"><h3>Quick reference</h3>
<h4>The <code>Colorizer</code> class</h4>
<ul>
<li><a href="#phantom_Casper_Colorizer_colorize"><code>Colorizer.colorize()</code></a></li>
<li><a href="#phantom_Casper_Colorizer_format"><code>Colorizer.format()</code></a></li>
</ul>
</div>
            </div>
          </div>
        </section>
        <section id="logging">
          <div class="page-header">
            <h1>Logging</h1>
          </div>
          <div id="logging_contents"><p>CasperJS allows logging using its <a href="#phantom_Casper_log"><code>log()</code></a> method
and these standard event levels:

</p>
<ul>
<li><code>debug</code></li>
<li><code>info</code></li>
<li><code>warning</code></li>
<li><code>error</code></li>
</ul>
<p>Sample use:

</p>
<pre><code class="javascript">var casper = require('casper').create();
casper.log('plop', 'debug');
casper.log('plip', 'warning');</code></pre>
<p>Now, there are two things to distinguish: log <em>storage</em> and log
<em>display</em>; by default CasperJS won't print the logs to the standard
output. In order to do so, you must enable the <code>verbose</code> Casper option:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    verbose: true
});</code></pre>
<p>Also, by default Casper is configured to filter logging which is under
the <code>error</code> level; you can override this setting by configuring the
<code>logLevel</code> option:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    verbose: true,
    logLevel: 'debug'
});</code></pre>
<p>You can also dump a JSON log of your Casper suite just by rendering the
contents of the <code>Casper.logs</code> property:

</p>
<pre><code class="javascript">var casper = require('casper').create({
// ...
casper.run(function() {
    this.echo(JSON.stringify(this.logs, null, 4)).exit();
});</code></pre>
<p>Last, if you print log messages to the standard output using the
<code>verbose</code> option, you'll get some fancy colors:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    verbose: true,
    logLevel: 'debug'
})
casper.log('this is a debug message', 'debug');
casper.log('and an informative one', 'info');
casper.log('and a warning', 'warning');
casper.log('and an error', 'error');
casper.exit();</code></pre>
<p>This will give the following output:

</p>
<p><img src="images/logoutput.png" alt="image">
</p>
</div>
        </section>
        <section id="extending">
          <div class="page-header">
            <h1>Extending Casper</h1>
          </div>
          <div id="extending_contents"><p>Sometimes it can be convenient to add your own methods to a <code>Casper</code>
object instance; you can easily do so as illustrated in the example
below:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    loadImages:  false,
    logLevel:   "debug",
    verbose:    true
});

var links = {
    'http://edition.cnn.com/': 0,
    'http://www.nytimes.com/': 0,
    'http://www.bbc.co.uk/': 0,
    'http://www.guardian.co.uk/': 0
};

var fantomas = Object.create(casper);

fantomas.countLinks = function(selector) {
    return this.evaluate(function() {
        return __utils__.findAll('a[href]').length;
    });
};

fantomas.renderJSON = function(what) {
    return this.echo(JSON.stringify(what, null, '  '));
};

fantomas.start();

Object.keys(links).forEach(function(url) {
    fantomas.thenOpen(url, function() {
        links[url] = this.countLinks();
    });
});

fantomas.run(function() {
    this.renderJSON(links).exit();
});</code></pre>
<p>Warning As of version 0.6, the <code>Casper.extend()</code> method has been
deprecated; please now use the method illustrated above.

</p>
<h3>Using CoffeeScript</h3>
<p>If you're writing your casper scripts using CoffeeScript, this is
getting a bit easier:

</p>
<pre><code class="coffeescript">links =
    'http://edition.cnn.com/': 0
    'http://www.nytimes.com/': 0
    'http://www.bbc.co.uk/': 0
    'http://www.guardian.co.uk/': 0

class Fantomas extends require('casper').Casper
    countLinks: -&gt;
        @evaluate -&gt;
            __utils__.findAll('a').length

    renderJSON: (what) -&gt;
        @echo JSON.stringify what, null, '  '

fantomas = new Fantomas
    loadImages:  false
    logLevel:    "debug"
    verbose:     true

fantomas.start()

for url of links
    do (url) -&gt;
        fantomas.thenOpen url, -&gt;
            links[url] = @countLinks()

fantomas.run -&gt;
    @renderJSON links
    @exit()</code></pre>
</div>
        </section>
        <section id="testing">
          <div class="page-header">
            <h1>Functional testing</h1>
          </div>
          <div id="testing_contents"><p>CasperJS ships with a handful set of tools to be used as a functional
testing framework. For example, let's test write a tests suite for
testing google search (yes, you read it well):

</p>
<pre><code class="javascript">var casper = require('casper').create();

casper.start('http://www.google.fr/', function() {
    this.test.assertTitle('Google', 'google homepage title is the one expected');
    this.test.assertExists('form[name=f]', 'main form is found');
    this.fill('form[name=f]', {
        q: 'foo'
    }, true);
});

casper.then(function() {
    this.test.assertTitle('foo - Recherche Google', 'google title is ok');
    this.test.assertUrlMatch(/q=foo/, 'search term has been submitted');
    this.test.assertEval(function() {
        return __utils__.findAll('h3.r').length &gt;= 10;
    }, 'google search for "foo" retrieves 10 or more results');
});

casper.run(function() {
    this.test.renderResults(true);
});</code></pre>
<p>As you can see, <code>casper.test</code> is a reference to a <code>tester.Tester</code> object
instance, which is used to make the assertions and render the results.

</p>
<p><span class="label label-info">Note</span> You can find the whole
<code>tester.Tester</code> API documentation in the <a href="#phantom_Casper_Tester">dedicated section</a>.

</p>
<p>Now run the tests suite:

</p>
<pre><code>$ casperjs samples/googletest.js</code></pre>
<p>You'll probably get something like this:

</p>
<p><img src="images/testsuiteok.png" alt="capture">

</p>
<p>In case any assertion fails, you'd rather get something like the
following:

</p>
<p><img src="images/testsuitefail.png" alt="capture">

</p>
<hr>
<h3>Exporting results in <em>xUnit</em> format</h3>
<p>CasperJS can export the results of the test suite to an xUnit XML file,
which is compatible with continous integration tools such as
<a href="http://jenkins-ci.org/">Jenkins</a>. To save the xUnit log of your test
suite to a <code>log.xml</code> file, you can process this way:

</p>
<pre><code class="javascript">casper.run(function() {
    this.test.renderResults(true, 0, 'log.xml');
});</code></pre>
<p>A cooler way is to add an option to your script using CLI argument
parsing:

</p>
<pre><code class="javascript">casper.run(function() {
    this.test.renderResults(true, 0, this.cli.get('save') || false);
});</code></pre>
<p>Then you can run:

</p>
<pre><code>$ casperjs test.js --save=log.xml</code></pre>
<hr>
<h3>CasperJS tests</h3>
<p>CasperJS has its own unit and functional test suite, located in the
<code>tests</code> subfolder. More tests will be added in the future. To run the
test suite, from the root of a checkout of the casperjs repository:

</p>
<pre><code>$ cd /path/to/casperjs
$ casperjs test tests/suites</code></pre>
<hr>
<h3>Organizing your tests</h3>
<p>Of course writing all your tests in a single file may be painful, so you
can split them accross files.

</p>
<div class="alert-message block-message">
  <p>
    <span class="label label-important">Important</span>
    There are <strong>two important conditions</strong> for splitting
    your test suite accross several files:
  </p>
  <ol class="bottom">
    <li>
      <p>
        <strong>Not</strong> to create a new <code>Casper</code> instance
        in a split test file;
      </p>
    </li>
    <li>
      <p>
        To call the <code>Tester.done()</code> method when all the tests
        contained in a single file have been executed.
      </p>
    </li>
  </ol>
</div>

<p>Here's a first sample test file:

</p>
<pre><code class="javascript">// file: /path/to/test/dir/test1.js

casper.test.comment('My first test file');
casper.test.assert(true, "true is so true");
casper.test.done(); // I must be called!</code></pre>
<p>And a second one:

</p>
<pre><code class="javascript">// file: /path/to/test/dir/test2.js

casper.test.comment('This is my second test file, a bit more async');

casper.start('http://my.location.tld/', function() {
    this.test.assertNot(false, "false is so false");
});

casper.run(function() {
    this.test.done(); // I must be called once all the async stuff has been executed
});</code></pre>
<p><span class="label label-info">Hint</span> As you can see, a standard <code>Casper</code>
class instance, stored in a <code>casper</code> variable, is already available and exposed
to each test file; that's because a configured one's already available as stated
previously.

</p>
<p>The <code>casperjs test</code> command comes handy for running all the tests found
at a given location:

</p>
<pre><code>$ casperjs test /path/to/test/dir/</code></pre>
<p>This is thericatelly what you will get:

</p>
<p><img src="images/split-test-results.png" alt="image">

</p>
<p>Last, you can of course run a single test file:

</p>
<pre><code class="javascript">$ casperjs test /path/to/test/dir/test1.js</code></pre>
<hr>
<h3>Extending Casper for Testing</h3>
<p>The <code>$ casper test [path]</code> command is just a shortcut for
<code>$ casper /path/to/casperjs/tests/run.js [path]</code>; so if you want to
extend Casper capabilities for your tests, your best bet is to write
your own runner and extend the casper object instance from there.

</p>
<p><span class="label label-info">Hint</span> You can find the default runner code in
<a href="https://github.com/n1k0/casperjs/blob/master/tests/run.js"><code>./tests/run.js</code></a>.
</p>
</div>
        </section>
        <section id="faq">
          <div class="page-header">
            <h1>Frequently Asked Questions <small>in random order</small></h1>
          </div>
          <div class="row">
            <div class="span7" id="faq_contents"><p>Here's a selection of the most frequesntly asked questions by casperjs
newcomers.

</p>
<h2 id="faq-help">I'm stuck! What can I do?</h2>

<p>Your best bet is probably to ask for help on the <a href="https://groups.google.com/forum/#!forum/casperjs">CasperJS discussion
group</a>

</p>
<hr>
<h2 id="faq-versioning">What is the versioning policy of CasperJS?</h2>

<p>Releases will follow the <a href="http://semver.org/">SemVer standard</a>; they
will be numbered with the follow format:

</p>
<pre><code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;[-&lt;identifier&gt;]</code></pre>
<p>And constructed with the following guidelines:

</p>
<ul>
<li>Breaking backwards compatibility bumps the major</li>
<li>New additions without breaking backwards compatibility bumps the minor</li>
<li>Bug fixes and misc changes bump the patch</li>
<li>Unstable, special and trunk versions will have a proper identifier</li>
</ul>
<hr>
<h2 id="faq-typeerror">I'm getting <em>TypeError: 'undefined' is not a function</em>; WTF?</h2>

<p>Unfortunately PhantomJS ships with a QtWebKit JS engine which would
<a href="http://code.google.com/p/phantomjs/issues/detail?id=336">need</a> quite a
serious upgrade to have more explicit error messages, stack traces,
location, etc.

</p>
<p>I cannot do much to make the situation really better, unfortunately :/

</p>
<hr>
<h2 id="faq-jquery">Can I use <a href="http://jquery.com/">jQuery</a> with CasperJS?</h2>

<p>Sure, as every single other javascript library on Earth.

</p>
<p>A first solution is to inject it into the remote DOM environement by
hand using the standard <code>WebPage.injectJs()</code> method:

</p>
<pre><code>casper.page.injectJs('http://code.jquery.com/jquery-1.7.min.js');</code></pre>
<p>If you need jQuery being available everytime, you can also make it being
injected in every received response by setting the <code>clientScripts</code>
option of CasperJS:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    clientScripts: ["includes/jquery.min.js"]
});</code></pre>
<hr>
<h2 id="faq-executable">Can I use CasperJS without using the <code>casperjs</code> executable?</h2>

<p>Yes, you can call a CasperJS script directly with the <code>phantomjs</code>
executable, but if you do so, you must set the <code>phantom.casperPath</code>
property to the path where the library root is located on your system:

</p>
<pre><code class="javascript">// casperscript.js
phantom.casperPath = '/path/to/casperjs';
phantom.injectJs(phantom.casperPath + '/bin/bootstrap.js');

var casper = require('casper').create();
// ...</code></pre>
<p>You can run such a script like any other standard PhantomJS script:

</p>
<pre><code>$ phantomjs casperscript.js</code></pre>
<p><span class="label label-info">Tip</span> This is especially useful if you work
on Windows and don't have a way to use the Python-based <code>casperjs</code> executable
easily.

</p>
<hr>
<h2 id="faq-httpstatuses">How can I catch HTTP 404 and other status codes?</h2>

<p>You can define your own HTTP status code handlers by using the
<code>httpStatusHandlers</code> option of the Casper object. You can also catch
other HTTP status codes as well, as demoed below:

</p>
<pre><code class="javascript">var casper = require('casper').create({
    httpStatusHandlers: {
        404: function(self, resource) {
            self.echo(resource.url + ' not found (404)');
        },
        500: function(self, resource) {
            self.echo(resource.url + ' gave an error (500)');
        }
    },
    verbose: true
});

casper.start('http://mywebsite/404', function() {
    this.echo('We suppose this url return an HTTP 404');
});

casper.thenOpen('http://mywebsite/500', function() {
    this.echo('We suppose this url return an HTTP 500');
});

casper.run(function() {
    this.echo('Done.').exit();
});</code></pre>
<p><span class="label label-info">Hint</span> As of 0.6, casper ships with a
complete <a href="#events-filters">event system</a> and a bunch of these are dedicated to
HTTP statuses. You're encouraged to use them.
</p>
</div>
            <div class="span5 apitoc">
              <div class="wrapper" id="faq_toc"><h3>FAQ list</h3>
<ul>
<li><a href="#faq-help">I'm stuck! What can I do?</a></li>
<li><a href="#faq-versioning">What is the versioning policy of CasperJS?</a></li>
<li><a href="#faq-typeerror">I'm getting <em>TypeError: 'undefined' is not a function</em>; WTF?</a></li>
<li><a href="#faq-jquery">Can I use jQuery with CasperJS?</a></li>
<li><a href="#faq-executable">Can I use CasperJS without using the casperjs executable?</a></li>
<li><a href="#faq-httpstatuses">How can I catch HTTP 404 and other status codes?</a></li>
</ul>
<p><span class="label label-info">Contribute</span> If you want to contribute FAQs
to this section, feel free to fork the <a href="https://github.com/n1k0/casperjs/tree/gh-pages">documentation pages branch on
github</a>, and send me a
pull request with your tips and tricks!
</p>
</div>
            </div>
          </div>
        </section>
        <section id="download">
          <div class="page-header">
            <h1>Download</h1>
          </div>
          <div id="download_contents"><p>You can download this project in either
<a href="https://github.com/n1k0/casperjs/zipball/0.6.4">zip</a> or
<a href="https://github.com/n1k0/casperjs/tarball/0.6.4">tar</a> formats. You can
also clone the project with <a href="http://git-scm.com">Git</a> by running:

</p>
<pre><code>$ git clone git://github.com/n1k0/casperjs casperjs</code></pre>
<p>Always try to use a tagged version on production:

</p>
<pre><code>$ cd casperjs
$ git checkout tags/0.6.4</code></pre>
<p>Feel free to play with the code and <a href="https://github.com/n1k0/casperjs/issues">report any issue on
github</a>. CasperJS has also its own <a href="https://twitter.com/casperjs_org">on
twitter account</a>.
</p>
</div>
        </section>
        <section id="license">
          <div class="page-header">
            <h1>License</h1>
          </div>
          <div id="license_contents"><p><a href="http://casperjs.org">Casper.js</a> is released under the terms of the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT
license</a>.

</p>
<pre><code>Copyright (c) 2011 Nicolas Perriault
Permission is hereby granted, free of charge, to any person obtaining a
copy of this software and associated documentation files (the "Software"),
to deal in the Software without restriction, including without limitation
the rights to use, copy, modify, merge, publish, distribute, sublicense,
and/or sell copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
DEALINGS IN THE SOFTWARE.</code></pre>
</div>
        </section>
      </div>
        <footer>
          <p>
            Â© 2011 Nicolas Perriault, <a href="http://akei.com/">Akei</a> â€” get
            the source code on GitHub: <a href="http://github.com/n1k0/casperjs">n1k0/casperjs</a>
          </p>
        </footer>
      </div>
      <script src="https://apis.google.com/_/apps-static/_/js/gapi/gcm_ppb,googleapis_client,plusone/rt=j/ver=ZKsErRZln-0.fr./sv=1/am=!Hh2SKJ9l_2-Ii1Htmg/d=1/cb=gapi.loaded0" async=""></script><script type="text/javascript" async="" src="http://www.google-analytics.com/ga.js"></script><script type="text/javascript" async="" src="https://apis.google.com/js/plusone.js"></script><script id="twitter-wjs" src="//platform.twitter.com/widgets.js"></script><script type="text/javascript" src="js/jquery.min.js"></script>
      <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="prettify/prettify.js"></script>
      <script type="text/javascript" src="js/application.js"></script>
      <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
      <script type="text/javascript">
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      </script>
      <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-71239-7']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      </script>
    
  

</body></html>